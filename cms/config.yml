backend:
  name: git-gateway
  branch: main

publish_mode: editorial_workflow

local_backend: true

media_library:
  name: cloudinary
  config:
    cloud_name: deepgram
    api_key: 144739743837772
    # https://www.netlifycms.org/docs/cloudinary/#security-considerations

collections:
  - label: "Site Settings"
    editor:
      preview: false
    name: settings
    files:
      - label: "Blog Settings"
        name: blog
        file: "content/blog/settings.json"
        fields:
          - { label: "Featured Post", name: featured_post, widget: relation, collection: blog, searchFields: [title, "{{slug}}"], displayFields: [title], valueField: "{{slug}}" }
          - name: homepage_posts
            label: "Homepage Posts"
            label_singular: "Homepage Post"
            widget: list
            min: 5
            max: 5
            field: { label: Post, name: post, widget: relation, collection: blog, searchFields: [title, "{{slug}}"], displayFields: [title], valueField: "{{slug}}" }
  - name: blog
    label: "Blog Posts"
    label_singular: Blog
    folder: "content/blog/posts"
    path: "{{slug}}/index"
    create: true
    slug: "{{slug}}"
    fields:
      - label: Title
        name: title
        widget: string
      - label: Description
        name: description
        widget: string
      - label: "Publish Date"
        name: date
        widget: datetime
        date_format: "YYYY-MM-DD"
        time_format: false
        picker_utc: true
      - label: "Cover Image"
        name: cover
        widget: image
      - label: "Post Authors"
        name: authors
        multiple: true
        widget: relation
        collection: authors
        search_fields: ["title"]
        display_fields: ["{{title}} - {{jobtitle}}"]
        value_field: "{{slug}}"
      - label: Category
        name: category
        widget: relation
        collection: category
        search_fields: ["title"]
        display_fields: ["title"]
        value_field: "{{slug}}"
      - label: Tags
        name: tags
        widget: list
        max: 3
        min: 1
      - label: Body
        name: body
        widget: markdown
      - label: SEO
        name: seo
        widget: object
        collapsed: true
        fields:
          - label: Title
            name: title
            widget: string
            required: false
          - label: Description
            name: description
            widget: string
            required: false
          - label: Keywords
            name: keywords
            widget: list
            required: false
          - label: "Canonical URL"
            name: canonical
            widget: string
            required: false
      - label: OpenGraph
        name: og
        widget: object
        collapsed: true
        fields:
          - label: Title
            name: title
            widget: string
            required: false
          - label: Description
            name: description
            widget: string
            required: false
          - label: Image
            name: image
            widget: image
            required: false
  - name: authors
    label: "Authors"
    label_singular: Author
    folder: "content/blog/authors"
    path: "{{slug}}"
    create: true
    slug: "{{slug}}"
    format: json
    fields:
      - label: Name
        name: title
        widget: string
      - label: Title
        name: jobtitle
        widget: string
      - label: Pronouns
        name: pronouns
        widget: string
      - label: Bio
        name: bio
        widget: markdown
      - label: Picture
        name: picture
        widget: image
  - name: category
    label: "Categories"
    label_singular: Category
    folder: "content/blog/category"
    path: "{{slug}}"
    create: true
    slug: "{{slug}}"
    format: json
    fields:
      - label: Name
        name: title
        widget: string
