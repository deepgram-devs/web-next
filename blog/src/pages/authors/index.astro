---
import PrimarySection from "../../shared/components/layout/PrimarySection.astro";
import Layout from "../../layouts/Default.astro";
import { Debug } from "astro/components";
import AuthorCardList from "../../shared/components/lists/AuthorCardList.astro";
import ContrastSection from "../../shared/components/decoration/ContrastSection.astro";
import Hero from "../../components/authors/Hero.astro";
import AuthorCard from "../../shared/components/cards/AuthorCard.astro";
import NoLinkCardListTitle from "../../shared/components/titles/NoLinkCardListTitle.astro";
import Title from "../../shared/components/meta/Title.astro";
import Description from "../../shared/components/meta/Description.astro";
import Meta from "../../shared/components/meta/Meta.astro";

const authorFiles = import.meta.glob("../../content/blog/authors/*.json");

async function getAuthors() {
	let authors = [];
	for (const path in authorFiles) {
		const author = await authorFiles[path]();
		const slug = path.split("/").pop().replace(".json", " ").trim();
		authors.push({ ...(author as object), slug });
	}
	return authors;
}

const authors = await getAuthors();
const team = authors.filter((a) => a.team);
const alumni = authors.filter((a) => !a.team && a.alumni);
const guests = authors.filter((a) => !a.team && !a.alumni);
---

<Layout>
	<Title slot="head:title" title="All authors - Deepgram Blog ⚡️" />
	<Description slot="head:description" name="description" content="All the authors writing content on the Deepgram blog." />
	<Meta slot="og:title" property="og:title" content="All authors - Deepgram Blog ⚡️" />
	<Meta slot="og:description" property="og:description" content="All the authors writing content on the Deepgram blog." />

	<ContrastSection contrast="darkCharcoal" class="bg-starburst-gradient" background="white" bottomDivider="eclipse-divider">
		<Hero title="Authors" />
	</ContrastSection>

	<PrimarySection>
		<AuthorCardList class="mt-10 lg:mt-16 xl:mt-20">
			<NoLinkCardListTitle slot="title"><h2>Deepgram Team</h2></NoLinkCardListTitle>
			{team.map((author) => <AuthorCard author={author} />)}
		</AuthorCardList>
		<AuthorCardList class="mt-10 lg:mt-16 xl:mt-20">
			<NoLinkCardListTitle slot="title"><h2>Guest Authors</h2></NoLinkCardListTitle>
			{guests.map((author) => <AuthorCard author={author} />)}
		</AuthorCardList>
		<AuthorCardList class="mt-10 lg:mt-16 xl:mt-20">
			<NoLinkCardListTitle slot="title"><h2>Deepgram Alumni</h2></NoLinkCardListTitle>
			{alumni.map((author) => <AuthorCard author={author} />)}
		</AuthorCardList>
	</PrimarySection>
</Layout>
