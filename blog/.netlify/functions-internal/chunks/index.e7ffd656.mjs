import { c as createAstro, a as createComponent, r as renderTemplate, b as renderHead } from '../entry.mjs';
import Slugger from 'github-slugger';
import '@astrojs/netlify/netlify-functions.js';
import 'preact';
import 'preact-render-to-string';
import 'vue';
import 'vue/server-renderer';
import 'html-escaper';
import 'node-html-parser';
import 'axios';
/* empty css                           *//* empty css                           *//* empty css                           */import '@storyblok/js';
/* empty css                           *//* empty css                          */import 'clone-deep';
import 'slugify';
import 'shiki';
/* empty css                           */import 'camelcase';
import '@astrojs/rss';
/* empty css                           */import 'mime';
import 'cookie';
import 'kleur/colors';
import 'string-width';
import 'path-browserify';
import 'path-to-regexp';

const metadata = { "headings": [{ "depth": 2, "slug": "the-old-way-vue-2-options-api", "text": "The Old Way: Vue 2 Options API" }, { "depth": 2, "slug": "new-and-improved-way-vue-3-composition-api", "text": "New and Improved Way: Vue 3 Composition API" }, { "depth": 2, "slug": "how-to-use-the-setup-function", "text": "How to Use the Setup Function" }, { "depth": 3, "slug": "example-using-setup", "text": "Example Using Setup" }, { "depth": 4, "slug": "vue-2", "text": "Vue 2" }, { "depth": 4, "slug": "vue-3", "text": "Vue 3" }, { "depth": 3, "slug": "important-facts-about-the-setup-function", "text": "Important Facts about the Setup Function" }, { "depth": 3, "slug": "props-and-context", "text": "Props and Context" }, { "depth": 4, "slug": "props", "text": "Props" }, { "depth": 4, "slug": "parent-component", "text": "Parent Component" }, { "depth": 4, "slug": "child-component", "text": "Child Component" }, { "depth": 4, "slug": "context", "text": "Context" }, { "depth": 2, "slug": "conclusion", "text": "Conclusion" }], "source": "\nIn this series of posts, I'm diving into Vue 3 as someone who is new to the Composition API but not new to Vue in general. I'm writing my impressions of how to get started with Vue 3 and comparing it to the way I would do things in Vue 2.\n\nToday, I'll take a look at the `setup` function that is new to Vue 3.\n\nAnd if you want to start at the beginning of the series, take a look at my first post: [Diving into Vue 3: Getting Started](https://blog.deepgram.com/diving-into-vue-3-getting-started/).\n\n## The Old Way: Vue 2 Options API\n\nThe Options API is familiar to those of us who have used Vue 2. A single-file-component includes a `template`, `script`, and `style` section, and in the script section, we would use the **options** of the Options API, organized something like this:\n\n```html\n<script>\n  export default {\n    name: 'ComponentName',\n    components: {},\n    props: {},\n    data() {},\n    watch: {},\n    methods: {},\n    mounted() {},\n  }\n<\/script>\n```\n\nThe Options API is all the properties and methods we get on our Vue instance, the instance we initialize when we set up the project in the **main.js** file (see my [previous post](https://blog.deepgram.com/diving-into-vue-3-getting-started/) for more info on initializing the Vue application object).\n\nThis organization of a component seems very easy to read at first glance, and it is one of the things that made me feel unafraid to jump into Vue initially. We clearly see how the different logic is separated by its type - `methods` versus `computed` versus `watch`.\n\nHowever, after becoming more experienced in using Vue and having worked with really large components, this actually starts to feel like a shortcoming because it forces us to jump around so much to follow the data as it moves through logic.\n\n## New and Improved Way: Vue 3 Composition API\n\nThe Composition API is born from experience - the experience of struggling to keep track of logic jumping around within a Vue component, from `data` to `methods` to `watch` to `methods` again back to `watch` and so on...\n\nAnd when we add a **mixin** to the mix (pun intended), jumping to a completely different file to follow the logic can be a huge headache since pieces of logic in the mixin can affect pieces of logic in the main component (rather than the mixin containing all the logic for a feature).\n\nThe better way is not to separate the script into sections by options, but instead to organize by *logical concern for individual features*. The `setup` function lets us do that because we can write the logic for each feature, group it under a function that we name, then invoke all the functions within the scope of the setup function.\n\nThis improvement has resulted in a new pattern called Vue 'composables', which is just this idea I described in the previous paragraph - grouping code by logical concern and making it into a reusable function. We'll learn more about composables in a later post, but the important thing to understand now is that the `setup` function is what makes it possible.\n\n## How to Use the Setup Function\n\nNow we'll get into the nitty-gritty of how to use the `setup` function.\n\nTechnically, the `setup` function is another **option** you can use in the **Options API** since it can be added alongside the list of other option properties and lifecycle methods, like this:\n\n```html\n<script>\n  export default {\n    name: 'ComponentName',\n    components: {},\n    data() {},\n    methods: {},\n    mounted() {},\n    setup() {},\n  }\n<\/script>\n```\n\nHowever, since we are choosing to do things the Vue 3 way, we'll probably just want to dive in completely and use the `setup` function without all the other options since what we get with `setup` will make it unnecessary to use them.\n\n### Example Using Setup\n\nHere is a very simple example that shows the most basic thing we need to do in Vue - create a variable to represent some data. This is the basic template where we have a data value for a number of employees.\n\n```html\n<template>\n  <div>\n    <h1>Basic Component</h1>\n    <p>Employees: {{ numEmployees }}</p>\n  </div>\n</template>\n```\n\nAnd here is what it would render as:\n\n![Basic component](https://res.cloudinary.com/deepgram/image/upload/v1642110686/blog/2022/02/diving-into-vue-3-setup-function/basic-component.png)\n\n`numEmployees` represents a number of people who work for a company. In Vue 2, in the script section, we would have created a data property using the `data()` option, like this:\n\n#### Vue 2\n\n```html\n<script>\n  export default {\n    data() {\n      return {\n        numEmployees: 0,\n      }\n    },\n  }\n<\/script>\n```\n\nIn Vue 3, we will just create our variable inside the `setup` function, like this:\n\n#### Vue 3\n\n```html\n<script>\n  export default {\n    setup() {\n      const numEmployees = 10\n      return { numEmployees }\n    },\n  }\n<\/script>\n```\n\nHowever, if we want that data property for numEmployees to be **reactive** (so it updates in the template when it changes in script), we have to use `ref()` around the value, and we have to import ref in order to use it:\n\n```js\n<script>\nimport { ref } from \"vue\";\nexport default {\n  name: \"BasicComponent\",\n  setup() {\n    const numEmployees = ref(10);\n    return { numEmployees };\n  },\n};\n<\/script>\n```\n\nWe also have to `return` an object with that data value; otherwise, it will not be available in the template.\n\n### Important Facts about the Setup Function\n\n1.  `setup` is a function, and it is also referred to as a 'hook' in a general sense because it is similar to the lifecycle methods in that *timing is important*. `Setup` runs before everything else - before all the lifecycle methods and the mounting of the component (although **not before props are resolved,** so you **will have access to props** in the setup function).\n\n2.  A big difference from Vue 2 is that we won't be seeing the keyword `this` all over the place to reference data values inside a component. In Vue 3, `this` in the way it was used in the Options API is not available in the `setup` function since `setup` runs so early.\n\n3.  `setup` must return an object. The object contains everything from within the scope of the setup function that you want to make available in the template.\n\n4.  Variables aren't reactive in the `setup` function unless you use `ref` with them (or `reactive`, but for now, we only need to concern ourselves with `ref`. Stay tuned for a post on `ref` and `reactive` in the near future).\n\n5.  `setup` can take two arguments - `props` and `context` - which we'll take a look at more closely in the next section.\n\n### Props and Context\n\n`setup` can take two arguments, `props` and `context`.\n\n#### Props\n\nIn this example a prop `message` has been added that wasn't there before. The prop is just a simple string. It's passed down the same way as in Vue 2, as we can see in the example:\n\n#### Parent Component\n\n```html\n<template>\n  <basic-component :message=\"message\" />\n</template>\n```\n\n#### Child Component\n\n```html\n<script>\n  import { ref } from 'vue'\n  export default {\n    name: 'BasicComponent',\n    props: {\n      message: String,\n    },\n    setup(props) {\n      console.log(props.message)\n\n      const numEmployees = ref(10)\n\n      return { numEmployees }\n    },\n  }\n<\/script>\n```\n\nThe `setup` function must have that `props` argument if we want to have access to the prop inside the function. I can `console.log` it to see the prop value:\n\n![Console-logged prop value](https://res.cloudinary.com/deepgram/image/upload/v1642110686/blog/2022/02/diving-into-vue-3-setup-function/console-prop-value.png)\n\nIn the template, we'll have it display like this. It is the same way we would do it in Vue 2:\n\n```html\n<template>\n  <div id=\"basic\">\n    <h1>Basic Component</h1>\n    <p>Employees: {{ numEmployees }}</p>\n    <div>{{ message }}</div>\n  </div>\n</template>\n```\n\n![Basic Component with prop](https://res.cloudinary.com/deepgram/image/upload/v1642110686/blog/2022/02/diving-into-vue-3-setup-function/basic-component-with-prop.png)\n\nIf we log `props` by itself to the console, like this:\n\n```js\nsetup(props) {\n  console.log(props);\n},\n```\n\nThen we see the props object, which looks like this:\n\n![Console-logged props object](https://res.cloudinary.com/deepgram/image/upload/v1642110686/blog/2022/02/diving-into-vue-3-setup-function/console-prop-object.png)\n\nThe object uses a `Proxy`, which is the new way that Vue 3 does reactivity (the details of what that is go beyond the scope of this post). Because props are reactive, they cannot easily be destructured in the setup function. If you want to understand more about that, [the docs explain it](https://v3.vuejs.org/guide/composition-api-setup.html#props). I don't find it necessary to destructure them, however (but I'm still very new to using Vue 3).\n\n#### Context\n\nThe second argument, `context`, gives us access to three properties that we had available in Vue 2 using the keyword this:\n\n*   `attrs` - (formerly `this.$attrs`) - An object containing the component's attributes\n\n*   `emit` - (formerly `this.$emit`) - A function that takes the event as argument\n\n*   `slots` - (formerly `this.$slots)` - An object containing the component's slots\n\nIf we only want to use one of these in the `setup` function, we can destructure the argument like this:\n\n```js\nexport default {\n  setup(props, { attrs }) {\n    console.log(attrs)\n  },\n}\n```\n\nThere is also another property, `expose`, which is useful in special cases. The [docs](https://v3.vuejs.org/guide/composition-api-setup.html#usage-with-templates) go over the example of using it when returning render functions from the `setup` function. That's a bit advanced for this series. If you have used `expose`, I would be interested to hear from you because I haven't used it myself!\n\n## Conclusion\n\nAnd that wraps up this post about the `setup` function. In the next post, we will be looking at `methods` and `computed` to see how we use those in Vue 3. And as always, feel free to reach out on [Twitter](https://twitter.com/sandra_rodgers_)!\n\n        ", "html": '<p>In this series of posts, I\u2019m diving into Vue 3 as someone who is new to the Composition API but not new to Vue in general. I\u2019m writing my impressions of how to get started with Vue 3 and comparing it to the way I would do things in Vue 2.</p>\n<p>Today, I\u2019ll take a look at the <code is:raw>setup</code> function that is new to Vue 3.</p>\n<p>And if you want to start at the beginning of the series, take a look at my first post: <a href="https://blog.deepgram.com/diving-into-vue-3-getting-started/">Diving into Vue 3: Getting Started</a>.</p>\n<h2 id="the-old-way-vue-2-options-api">The Old Way: Vue 2 Options API</h2>\n<p>The Options API is familiar to those of us who have used Vue 2. A single-file-component includes a <code is:raw>template</code>, <code is:raw>script</code>, and <code is:raw>style</code> section, and in the script section, we would use the <strong>options</strong> of the Options API, organized something like this:</p>\n<pre is:raw class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9">&lt;</span><span style="color: #7EE787">script</span><span style="color: #C9D1D9">&gt;</span></span>\n<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">export</span><span style="color: #FFA657"> </span><span style="color: #FF7B72">default</span><span style="color: #FFA657"> {</span></span>\n<span class="line"><span style="color: #FFA657">    </span><span style="color: #C9D1D9">name: </span><span style="color: #A5D6FF">&#39;ComponentName&#39;</span><span style="color: #FFA657">,</span></span>\n<span class="line"><span style="color: #FFA657">    </span><span style="color: #C9D1D9">components: {}</span><span style="color: #FFA657">,</span></span>\n<span class="line"><span style="color: #FFA657">    </span><span style="color: #C9D1D9">props: {}</span><span style="color: #FFA657">,</span></span>\n<span class="line"><span style="color: #FFA657">    </span><span style="color: #D2A8FF">data</span><span style="color: #FFA657">() </span><span style="color: #C9D1D9">{}</span><span style="color: #FFA657">,</span></span>\n<span class="line"><span style="color: #FFA657">    </span><span style="color: #C9D1D9">watch: {}</span><span style="color: #FFA657">,</span></span>\n<span class="line"><span style="color: #FFA657">    </span><span style="color: #C9D1D9">methods: {}</span><span style="color: #FFA657">,</span></span>\n<span class="line"><span style="color: #FFA657">    </span><span style="color: #D2A8FF">mounted</span><span style="color: #FFA657">() </span><span style="color: #C9D1D9">{}</span><span style="color: #FFA657">,</span></span>\n<span class="line"><span style="color: #FFA657">  }</span></span>\n<span class="line"><span style="color: #C9D1D9">&lt;/</span><span style="color: #7EE787">script</span><span style="color: #C9D1D9">&gt;</span></span></code></pre>\n<p>The Options API is all the properties and methods we get on our Vue instance, the instance we initialize when we set up the project in the <strong>main.js</strong> file (see my <a href="https://blog.deepgram.com/diving-into-vue-3-getting-started/">previous post</a> for more info on initializing the Vue application object).</p>\n<p>This organization of a component seems very easy to read at first glance, and it is one of the things that made me feel unafraid to jump into Vue initially. We clearly see how the different logic is separated by its type - <code is:raw>methods</code> versus <code is:raw>computed</code> versus <code is:raw>watch</code>.</p>\n<p>However, after becoming more experienced in using Vue and having worked with really large components, this actually starts to feel like a shortcoming because it forces us to jump around so much to follow the data as it moves through logic.</p>\n<h2 id="new-and-improved-way-vue-3-composition-api">New and Improved Way: Vue 3 Composition API</h2>\n<p>The Composition API is born from experience - the experience of struggling to keep track of logic jumping around within a Vue component, from <code is:raw>data</code> to <code is:raw>methods</code> to <code is:raw>watch</code> to <code is:raw>methods</code> again back to <code is:raw>watch</code> and so on\u2026</p>\n<p>And when we add a <strong>mixin</strong> to the mix (pun intended), jumping to a completely different file to follow the logic can be a huge headache since pieces of logic in the mixin can affect pieces of logic in the main component (rather than the mixin containing all the logic for a feature).</p>\n<p>The better way is not to separate the script into sections by options, but instead to organize by <em>logical concern for individual features</em>. The <code is:raw>setup</code> function lets us do that because we can write the logic for each feature, group it under a function that we name, then invoke all the functions within the scope of the setup function.</p>\n<p>This improvement has resulted in a new pattern called Vue \u2018composables\u2019, which is just this idea I described in the previous paragraph - grouping code by logical concern and making it into a reusable function. We\u2019ll learn more about composables in a later post, but the important thing to understand now is that the <code is:raw>setup</code> function is what makes it possible.</p>\n<h2 id="how-to-use-the-setup-function">How to Use the Setup Function</h2>\n<p>Now we\u2019ll get into the nitty-gritty of how to use the <code is:raw>setup</code> function.</p>\n<p>Technically, the <code is:raw>setup</code> function is another <strong>option</strong> you can use in the <strong>Options API</strong> since it can be added alongside the list of other option properties and lifecycle methods, like this:</p>\n<pre is:raw class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9">&lt;</span><span style="color: #7EE787">script</span><span style="color: #C9D1D9">&gt;</span></span>\n<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">export</span><span style="color: #FFA657"> </span><span style="color: #FF7B72">default</span><span style="color: #FFA657"> {</span></span>\n<span class="line"><span style="color: #FFA657">    </span><span style="color: #C9D1D9">name: </span><span style="color: #A5D6FF">&#39;ComponentName&#39;</span><span style="color: #FFA657">,</span></span>\n<span class="line"><span style="color: #FFA657">    </span><span style="color: #C9D1D9">components: {}</span><span style="color: #FFA657">,</span></span>\n<span class="line"><span style="color: #FFA657">    </span><span style="color: #D2A8FF">data</span><span style="color: #FFA657">() </span><span style="color: #C9D1D9">{}</span><span style="color: #FFA657">,</span></span>\n<span class="line"><span style="color: #FFA657">    </span><span style="color: #C9D1D9">methods: {}</span><span style="color: #FFA657">,</span></span>\n<span class="line"><span style="color: #FFA657">    </span><span style="color: #D2A8FF">mounted</span><span style="color: #FFA657">() </span><span style="color: #C9D1D9">{}</span><span style="color: #FFA657">,</span></span>\n<span class="line"><span style="color: #FFA657">    </span><span style="color: #D2A8FF">setup</span><span style="color: #FFA657">() </span><span style="color: #C9D1D9">{}</span><span style="color: #FFA657">,</span></span>\n<span class="line"><span style="color: #FFA657">  }</span></span>\n<span class="line"><span style="color: #C9D1D9">&lt;/</span><span style="color: #7EE787">script</span><span style="color: #C9D1D9">&gt;</span></span></code></pre>\n<p>However, since we are choosing to do things the Vue 3 way, we\u2019ll probably just want to dive in completely and use the <code is:raw>setup</code> function without all the other options since what we get with <code is:raw>setup</code> will make it unnecessary to use them.</p>\n<h3 id="example-using-setup">Example Using Setup</h3>\n<p>Here is a very simple example that shows the most basic thing we need to do in Vue - create a variable to represent some data. This is the basic template where we have a data value for a number of employees.</p>\n<pre is:raw class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9">&lt;</span><span style="color: #7EE787">template</span><span style="color: #C9D1D9">&gt;</span></span>\n<span class="line"><span style="color: #C9D1D9">  &lt;</span><span style="color: #7EE787">div</span><span style="color: #C9D1D9">&gt;</span></span>\n<span class="line"><span style="color: #C9D1D9">    &lt;</span><span style="color: #7EE787">h1</span><span style="color: #C9D1D9">&gt;Basic Component&lt;/</span><span style="color: #7EE787">h1</span><span style="color: #C9D1D9">&gt;</span></span>\n<span class="line"><span style="color: #C9D1D9">    &lt;</span><span style="color: #7EE787">p</span><span style="color: #C9D1D9">&gt;Employees: {{ numEmployees }}&lt;/</span><span style="color: #7EE787">p</span><span style="color: #C9D1D9">&gt;</span></span>\n<span class="line"><span style="color: #C9D1D9">  &lt;/</span><span style="color: #7EE787">div</span><span style="color: #C9D1D9">&gt;</span></span>\n<span class="line"><span style="color: #C9D1D9">&lt;/</span><span style="color: #7EE787">template</span><span style="color: #C9D1D9">&gt;</span></span></code></pre>\n<p>And here is what it would render as:</p>\n<p><img src="https://res.cloudinary.com/deepgram/image/upload/v1642110686/blog/2022/02/diving-into-vue-3-setup-function/basic-component.png" alt="Basic component"></p>\n<p><code is:raw>numEmployees</code> represents a number of people who work for a company. In Vue 2, in the script section, we would have created a data property using the <code is:raw>data()</code> option, like this:</p>\n<h4 id="vue-2">Vue 2</h4>\n<pre is:raw class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9">&lt;</span><span style="color: #7EE787">script</span><span style="color: #C9D1D9">&gt;</span></span>\n<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">export</span><span style="color: #FFA657"> </span><span style="color: #FF7B72">default</span><span style="color: #FFA657"> {</span></span>\n<span class="line"><span style="color: #FFA657">    </span><span style="color: #D2A8FF">data</span><span style="color: #FFA657">() </span><span style="color: #C9D1D9">{</span></span>\n<span class="line"><span style="color: #C9D1D9">      </span><span style="color: #FF7B72">return</span><span style="color: #C9D1D9"> {</span></span>\n<span class="line"><span style="color: #C9D1D9">        numEmployees: </span><span style="color: #79C0FF">0</span><span style="color: #C9D1D9">,</span></span>\n<span class="line"><span style="color: #C9D1D9">      }</span></span>\n<span class="line"><span style="color: #C9D1D9">    }</span><span style="color: #FFA657">,</span></span>\n<span class="line"><span style="color: #FFA657">  }</span></span>\n<span class="line"><span style="color: #C9D1D9">&lt;/</span><span style="color: #7EE787">script</span><span style="color: #C9D1D9">&gt;</span></span></code></pre>\n<p>In Vue 3, we will just create our variable inside the <code is:raw>setup</code> function, like this:</p>\n<h4 id="vue-3">Vue 3</h4>\n<pre is:raw class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9">&lt;</span><span style="color: #7EE787">script</span><span style="color: #C9D1D9">&gt;</span></span>\n<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">export</span><span style="color: #FFA657"> </span><span style="color: #FF7B72">default</span><span style="color: #FFA657"> {</span></span>\n<span class="line"><span style="color: #FFA657">    </span><span style="color: #D2A8FF">setup</span><span style="color: #FFA657">() </span><span style="color: #C9D1D9">{</span></span>\n<span class="line"><span style="color: #C9D1D9">      </span><span style="color: #FF7B72">const</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">numEmployees</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">10</span></span>\n<span class="line"><span style="color: #C9D1D9">      </span><span style="color: #FF7B72">return</span><span style="color: #C9D1D9"> { numEmployees }</span></span>\n<span class="line"><span style="color: #C9D1D9">    }</span><span style="color: #FFA657">,</span></span>\n<span class="line"><span style="color: #FFA657">  }</span></span>\n<span class="line"><span style="color: #C9D1D9">&lt;/</span><span style="color: #7EE787">script</span><span style="color: #C9D1D9">&gt;</span></span></code></pre>\n<p>However, if we want that data property for numEmployees to be <strong>reactive</strong> (so it updates in the template when it changes in script), we have to use <code is:raw>ref()</code> around the value, and we have to import ref in order to use it:</p>\n<pre is:raw class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9">&lt;</span><span style="color: #7EE787">script</span><span style="color: #C9D1D9">&gt;</span></span>\n<span class="line"><span style="color: #C9D1D9">import </span><span style="color: #FF7B72">{</span><span style="color: #C9D1D9"> ref </span><span style="color: #FF7B72">}</span><span style="color: #C9D1D9"> from &quot;vue&quot;;</span></span>\n<span class="line"><span style="color: #C9D1D9">export default </span><span style="color: #FF7B72">{</span></span>\n<span class="line"><span style="color: #C9D1D9">  name: </span><span style="color: #A5D6FF">&quot;BasicComponent&quot;</span><span style="color: #C9D1D9">,</span></span>\n<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #D2A8FF">setup</span><span style="color: #C9D1D9">() {</span></span>\n<span class="line"><span style="color: #C9D1D9">    const numEmployees </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">ref</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">10</span><span style="color: #C9D1D9">);</span></span>\n<span class="line"><span style="color: #C9D1D9">    return { numEmployees };</span></span>\n<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">}</span><span style="color: #C9D1D9">,</span></span>\n<span class="line"><span style="color: #C9D1D9">};</span></span>\n<span class="line"><span style="color: #C9D1D9">&lt;/</span><span style="color: #7EE787">script</span><span style="color: #C9D1D9">&gt;</span></span></code></pre>\n<p>We also have to <code is:raw>return</code> an object with that data value; otherwise, it will not be available in the template.</p>\n<h3 id="important-facts-about-the-setup-function">Important Facts about the Setup Function</h3>\n<ol>\n<li>\n<p><code is:raw>setup</code> is a function, and it is also referred to as a \u2018hook\u2019 in a general sense because it is similar to the lifecycle methods in that <em>timing is important</em>. <code is:raw>Setup</code> runs before everything else - before all the lifecycle methods and the mounting of the component (although <strong>not before props are resolved,</strong> so you <strong>will have access to props</strong> in the setup function).</p>\n</li>\n<li>\n<p>A big difference from Vue 2 is that we won\u2019t be seeing the keyword <code is:raw>this</code> all over the place to reference data values inside a component. In Vue 3, <code is:raw>this</code> in the way it was used in the Options API is not available in the <code is:raw>setup</code> function since <code is:raw>setup</code> runs so early.</p>\n</li>\n<li>\n<p><code is:raw>setup</code> must return an object. The object contains everything from within the scope of the setup function that you want to make available in the template.</p>\n</li>\n<li>\n<p>Variables aren\u2019t reactive in the <code is:raw>setup</code> function unless you use <code is:raw>ref</code> with them (or <code is:raw>reactive</code>, but for now, we only need to concern ourselves with <code is:raw>ref</code>. Stay tuned for a post on <code is:raw>ref</code> and <code is:raw>reactive</code> in the near future).</p>\n</li>\n<li>\n<p><code is:raw>setup</code> can take two arguments - <code is:raw>props</code> and <code is:raw>context</code> - which we\u2019ll take a look at more closely in the next section.</p>\n</li>\n</ol>\n<h3 id="props-and-context">Props and Context</h3>\n<p><code is:raw>setup</code> can take two arguments, <code is:raw>props</code> and <code is:raw>context</code>.</p>\n<h4 id="props">Props</h4>\n<p>In this example a prop <code is:raw>message</code> has been added that wasn\u2019t there before. The prop is just a simple string. It\u2019s passed down the same way as in Vue 2, as we can see in the example:</p>\n<h4 id="parent-component">Parent Component</h4>\n<pre is:raw class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9">&lt;</span><span style="color: #7EE787">template</span><span style="color: #C9D1D9">&gt;</span></span>\n<span class="line"><span style="color: #C9D1D9">  &lt;</span><span style="color: #7EE787">basic-component</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">:message</span><span style="color: #C9D1D9">=</span><span style="color: #A5D6FF">&quot;message&quot;</span><span style="color: #C9D1D9"> /&gt;</span></span>\n<span class="line"><span style="color: #C9D1D9">&lt;/</span><span style="color: #7EE787">template</span><span style="color: #C9D1D9">&gt;</span></span></code></pre>\n<h4 id="child-component">Child Component</h4>\n<pre is:raw class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9">&lt;</span><span style="color: #7EE787">script</span><span style="color: #C9D1D9">&gt;</span></span>\n<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">import</span><span style="color: #C9D1D9"> { ref } </span><span style="color: #FF7B72">from</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">&#39;vue&#39;</span></span>\n<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">export</span><span style="color: #FFA657"> </span><span style="color: #FF7B72">default</span><span style="color: #FFA657"> {</span></span>\n<span class="line"><span style="color: #FFA657">    </span><span style="color: #C9D1D9">name: </span><span style="color: #A5D6FF">&#39;BasicComponent&#39;</span><span style="color: #FFA657">,</span></span>\n<span class="line"><span style="color: #FFA657">    </span><span style="color: #C9D1D9">props: {</span></span>\n<span class="line"><span style="color: #C9D1D9">      message: String,</span></span>\n<span class="line"><span style="color: #C9D1D9">    }</span><span style="color: #FFA657">,</span></span>\n<span class="line"><span style="color: #FFA657">    </span><span style="color: #D2A8FF">setup</span><span style="color: #FFA657">(props) </span><span style="color: #C9D1D9">{</span></span>\n<span class="line"><span style="color: #C9D1D9">      console.</span><span style="color: #D2A8FF">log</span><span style="color: #C9D1D9">(props.message)</span></span>\n<span class="line"></span>\n<span class="line"><span style="color: #C9D1D9">      </span><span style="color: #FF7B72">const</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">numEmployees</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">ref</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">10</span><span style="color: #C9D1D9">)</span></span>\n<span class="line"></span>\n<span class="line"><span style="color: #C9D1D9">      </span><span style="color: #FF7B72">return</span><span style="color: #C9D1D9"> { numEmployees }</span></span>\n<span class="line"><span style="color: #C9D1D9">    }</span><span style="color: #FFA657">,</span></span>\n<span class="line"><span style="color: #FFA657">  }</span></span>\n<span class="line"><span style="color: #C9D1D9">&lt;/</span><span style="color: #7EE787">script</span><span style="color: #C9D1D9">&gt;</span></span></code></pre>\n<p>The <code is:raw>setup</code> function must have that <code is:raw>props</code> argument if we want to have access to the prop inside the function. I can <code is:raw>console.log</code> it to see the prop value:</p>\n<p><img src="https://res.cloudinary.com/deepgram/image/upload/v1642110686/blog/2022/02/diving-into-vue-3-setup-function/console-prop-value.png" alt="Console-logged prop value"></p>\n<p>In the template, we\u2019ll have it display like this. It is the same way we would do it in Vue 2:</p>\n<pre is:raw class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9">&lt;</span><span style="color: #7EE787">template</span><span style="color: #C9D1D9">&gt;</span></span>\n<span class="line"><span style="color: #C9D1D9">  &lt;</span><span style="color: #7EE787">div</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">id</span><span style="color: #C9D1D9">=</span><span style="color: #A5D6FF">&quot;basic&quot;</span><span style="color: #C9D1D9">&gt;</span></span>\n<span class="line"><span style="color: #C9D1D9">    &lt;</span><span style="color: #7EE787">h1</span><span style="color: #C9D1D9">&gt;Basic Component&lt;/</span><span style="color: #7EE787">h1</span><span style="color: #C9D1D9">&gt;</span></span>\n<span class="line"><span style="color: #C9D1D9">    &lt;</span><span style="color: #7EE787">p</span><span style="color: #C9D1D9">&gt;Employees: {{ numEmployees }}&lt;/</span><span style="color: #7EE787">p</span><span style="color: #C9D1D9">&gt;</span></span>\n<span class="line"><span style="color: #C9D1D9">    &lt;</span><span style="color: #7EE787">div</span><span style="color: #C9D1D9">&gt;{{ message }}&lt;/</span><span style="color: #7EE787">div</span><span style="color: #C9D1D9">&gt;</span></span>\n<span class="line"><span style="color: #C9D1D9">  &lt;/</span><span style="color: #7EE787">div</span><span style="color: #C9D1D9">&gt;</span></span>\n<span class="line"><span style="color: #C9D1D9">&lt;/</span><span style="color: #7EE787">template</span><span style="color: #C9D1D9">&gt;</span></span></code></pre>\n<p><img src="https://res.cloudinary.com/deepgram/image/upload/v1642110686/blog/2022/02/diving-into-vue-3-setup-function/basic-component-with-prop.png" alt="Basic Component with prop"></p>\n<p>If we log <code is:raw>props</code> by itself to the console, like this:</p>\n<pre is:raw class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #D2A8FF">setup</span><span style="color: #C9D1D9">(props) {</span></span>\n<span class="line"><span style="color: #C9D1D9">  console.</span><span style="color: #D2A8FF">log</span><span style="color: #C9D1D9">(props);</span></span>\n<span class="line"><span style="color: #C9D1D9">},</span></span></code></pre>\n<p>Then we see the props object, which looks like this:</p>\n<p><img src="https://res.cloudinary.com/deepgram/image/upload/v1642110686/blog/2022/02/diving-into-vue-3-setup-function/console-prop-object.png" alt="Console-logged props object"></p>\n<p>The object uses a <code is:raw>Proxy</code>, which is the new way that Vue 3 does reactivity (the details of what that is go beyond the scope of this post). Because props are reactive, they cannot easily be destructured in the setup function. If you want to understand more about that, <a href="https://v3.vuejs.org/guide/composition-api-setup.html#props">the docs explain it</a>. I don\u2019t find it necessary to destructure them, however (but I\u2019m still very new to using Vue 3).</p>\n<h4 id="context">Context</h4>\n<p>The second argument, <code is:raw>context</code>, gives us access to three properties that we had available in Vue 2 using the keyword this:</p>\n<ul>\n<li>\n<p><code is:raw>attrs</code> - (formerly <code is:raw>this.$attrs</code>) - An object containing the component\u2019s attributes</p>\n</li>\n<li>\n<p><code is:raw>emit</code> - (formerly <code is:raw>this.$emit</code>) - A function that takes the event as argument</p>\n</li>\n<li>\n<p><code is:raw>slots</code> - (formerly <code is:raw>this.$slots)</code> - An object containing the component\u2019s slots</p>\n</li>\n</ul>\n<p>If we only want to use one of these in the <code is:raw>setup</code> function, we can destructure the argument like this:</p>\n<pre is:raw class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #FF7B72">export</span><span style="color: #FFA657"> </span><span style="color: #FF7B72">default</span><span style="color: #FFA657"> {</span></span>\n<span class="line"><span style="color: #FFA657">  </span><span style="color: #D2A8FF">setup</span><span style="color: #FFA657">(props, { attrs }) </span><span style="color: #C9D1D9">{</span></span>\n<span class="line"><span style="color: #C9D1D9">    console.</span><span style="color: #D2A8FF">log</span><span style="color: #C9D1D9">(attrs)</span></span>\n<span class="line"><span style="color: #C9D1D9">  }</span><span style="color: #FFA657">,</span></span>\n<span class="line"><span style="color: #FFA657">}</span></span></code></pre>\n<p>There is also another property, <code is:raw>expose</code>, which is useful in special cases. The <a href="https://v3.vuejs.org/guide/composition-api-setup.html#usage-with-templates">docs</a> go over the example of using it when returning render functions from the <code is:raw>setup</code> function. That\u2019s a bit advanced for this series. If you have used <code is:raw>expose</code>, I would be interested to hear from you because I haven\u2019t used it myself!</p>\n<h2 id="conclusion">Conclusion</h2>\n<p>And that wraps up this post about the <code is:raw>setup</code> function. In the next post, we will be looking at <code is:raw>methods</code> and <code is:raw>computed</code> to see how we use those in Vue 3. And as always, feel free to reach out on <a href="https://twitter.com/sandra_rodgers_">Twitter</a>!</p>' };
const frontmatter = { "title": "Diving Into Vue 3 - The Setup Function", "description": "Learn about the new Vue 3 setup function and the Composition API", "date": "2022-02-04T00:00:00.000Z", "cover": "https://res.cloudinary.com/deepgram/image/upload/v1643314554/blog/2022/02/diving-into-vue-3-setup-function/dive-into-vue-3%402x.jpg", "authors": ["sandra-rodgers"], "category": "tutorial", "tags": ["vuejs", "javascript"], "seo": { "title": "Diving Into Vue 3 - The Setup Function", "description": "Learn about the new Vue 3 setup function and the Composition API" }, "shorturls": { "share": "https://dpgr.am/ac518b9", "twitter": "https://dpgr.am/3a56d0b", "linkedin": "https://dpgr.am/931f9a0", "reddit": "https://dpgr.am/736169b", "facebook": "https://dpgr.am/dc79347" }, "og": { "image": "https://res.cloudinary.com/deepgram/image/upload/v1661453994/blog/diving-into-vue-3-setup-function/ograph.png" }, "astro": { "headings": [{ "depth": 2, "slug": "the-old-way-vue-2-options-api", "text": "The Old Way: Vue 2 Options API" }, { "depth": 2, "slug": "new-and-improved-way-vue-3-composition-api", "text": "New and Improved Way: Vue 3 Composition API" }, { "depth": 2, "slug": "how-to-use-the-setup-function", "text": "How to Use the Setup Function" }, { "depth": 3, "slug": "example-using-setup", "text": "Example Using Setup" }, { "depth": 4, "slug": "vue-2", "text": "Vue 2" }, { "depth": 4, "slug": "vue-3", "text": "Vue 3" }, { "depth": 3, "slug": "important-facts-about-the-setup-function", "text": "Important Facts about the Setup Function" }, { "depth": 3, "slug": "props-and-context", "text": "Props and Context" }, { "depth": 4, "slug": "props", "text": "Props" }, { "depth": 4, "slug": "parent-component", "text": "Parent Component" }, { "depth": 4, "slug": "child-component", "text": "Child Component" }, { "depth": 4, "slug": "context", "text": "Context" }, { "depth": 2, "slug": "conclusion", "text": "Conclusion" }], "source": "\nIn this series of posts, I'm diving into Vue 3 as someone who is new to the Composition API but not new to Vue in general. I'm writing my impressions of how to get started with Vue 3 and comparing it to the way I would do things in Vue 2.\n\nToday, I'll take a look at the `setup` function that is new to Vue 3.\n\nAnd if you want to start at the beginning of the series, take a look at my first post: [Diving into Vue 3: Getting Started](https://blog.deepgram.com/diving-into-vue-3-getting-started/).\n\n## The Old Way: Vue 2 Options API\n\nThe Options API is familiar to those of us who have used Vue 2. A single-file-component includes a `template`, `script`, and `style` section, and in the script section, we would use the **options** of the Options API, organized something like this:\n\n```html\n<script>\n  export default {\n    name: 'ComponentName',\n    components: {},\n    props: {},\n    data() {},\n    watch: {},\n    methods: {},\n    mounted() {},\n  }\n<\/script>\n```\n\nThe Options API is all the properties and methods we get on our Vue instance, the instance we initialize when we set up the project in the **main.js** file (see my [previous post](https://blog.deepgram.com/diving-into-vue-3-getting-started/) for more info on initializing the Vue application object).\n\nThis organization of a component seems very easy to read at first glance, and it is one of the things that made me feel unafraid to jump into Vue initially. We clearly see how the different logic is separated by its type - `methods` versus `computed` versus `watch`.\n\nHowever, after becoming more experienced in using Vue and having worked with really large components, this actually starts to feel like a shortcoming because it forces us to jump around so much to follow the data as it moves through logic.\n\n## New and Improved Way: Vue 3 Composition API\n\nThe Composition API is born from experience - the experience of struggling to keep track of logic jumping around within a Vue component, from `data` to `methods` to `watch` to `methods` again back to `watch` and so on...\n\nAnd when we add a **mixin** to the mix (pun intended), jumping to a completely different file to follow the logic can be a huge headache since pieces of logic in the mixin can affect pieces of logic in the main component (rather than the mixin containing all the logic for a feature).\n\nThe better way is not to separate the script into sections by options, but instead to organize by *logical concern for individual features*. The `setup` function lets us do that because we can write the logic for each feature, group it under a function that we name, then invoke all the functions within the scope of the setup function.\n\nThis improvement has resulted in a new pattern called Vue 'composables', which is just this idea I described in the previous paragraph - grouping code by logical concern and making it into a reusable function. We'll learn more about composables in a later post, but the important thing to understand now is that the `setup` function is what makes it possible.\n\n## How to Use the Setup Function\n\nNow we'll get into the nitty-gritty of how to use the `setup` function.\n\nTechnically, the `setup` function is another **option** you can use in the **Options API** since it can be added alongside the list of other option properties and lifecycle methods, like this:\n\n```html\n<script>\n  export default {\n    name: 'ComponentName',\n    components: {},\n    data() {},\n    methods: {},\n    mounted() {},\n    setup() {},\n  }\n<\/script>\n```\n\nHowever, since we are choosing to do things the Vue 3 way, we'll probably just want to dive in completely and use the `setup` function without all the other options since what we get with `setup` will make it unnecessary to use them.\n\n### Example Using Setup\n\nHere is a very simple example that shows the most basic thing we need to do in Vue - create a variable to represent some data. This is the basic template where we have a data value for a number of employees.\n\n```html\n<template>\n  <div>\n    <h1>Basic Component</h1>\n    <p>Employees: {{ numEmployees }}</p>\n  </div>\n</template>\n```\n\nAnd here is what it would render as:\n\n![Basic component](https://res.cloudinary.com/deepgram/image/upload/v1642110686/blog/2022/02/diving-into-vue-3-setup-function/basic-component.png)\n\n`numEmployees` represents a number of people who work for a company. In Vue 2, in the script section, we would have created a data property using the `data()` option, like this:\n\n#### Vue 2\n\n```html\n<script>\n  export default {\n    data() {\n      return {\n        numEmployees: 0,\n      }\n    },\n  }\n<\/script>\n```\n\nIn Vue 3, we will just create our variable inside the `setup` function, like this:\n\n#### Vue 3\n\n```html\n<script>\n  export default {\n    setup() {\n      const numEmployees = 10\n      return { numEmployees }\n    },\n  }\n<\/script>\n```\n\nHowever, if we want that data property for numEmployees to be **reactive** (so it updates in the template when it changes in script), we have to use `ref()` around the value, and we have to import ref in order to use it:\n\n```js\n<script>\nimport { ref } from \"vue\";\nexport default {\n  name: \"BasicComponent\",\n  setup() {\n    const numEmployees = ref(10);\n    return { numEmployees };\n  },\n};\n<\/script>\n```\n\nWe also have to `return` an object with that data value; otherwise, it will not be available in the template.\n\n### Important Facts about the Setup Function\n\n1.  `setup` is a function, and it is also referred to as a 'hook' in a general sense because it is similar to the lifecycle methods in that *timing is important*. `Setup` runs before everything else - before all the lifecycle methods and the mounting of the component (although **not before props are resolved,** so you **will have access to props** in the setup function).\n\n2.  A big difference from Vue 2 is that we won't be seeing the keyword `this` all over the place to reference data values inside a component. In Vue 3, `this` in the way it was used in the Options API is not available in the `setup` function since `setup` runs so early.\n\n3.  `setup` must return an object. The object contains everything from within the scope of the setup function that you want to make available in the template.\n\n4.  Variables aren't reactive in the `setup` function unless you use `ref` with them (or `reactive`, but for now, we only need to concern ourselves with `ref`. Stay tuned for a post on `ref` and `reactive` in the near future).\n\n5.  `setup` can take two arguments - `props` and `context` - which we'll take a look at more closely in the next section.\n\n### Props and Context\n\n`setup` can take two arguments, `props` and `context`.\n\n#### Props\n\nIn this example a prop `message` has been added that wasn't there before. The prop is just a simple string. It's passed down the same way as in Vue 2, as we can see in the example:\n\n#### Parent Component\n\n```html\n<template>\n  <basic-component :message=\"message\" />\n</template>\n```\n\n#### Child Component\n\n```html\n<script>\n  import { ref } from 'vue'\n  export default {\n    name: 'BasicComponent',\n    props: {\n      message: String,\n    },\n    setup(props) {\n      console.log(props.message)\n\n      const numEmployees = ref(10)\n\n      return { numEmployees }\n    },\n  }\n<\/script>\n```\n\nThe `setup` function must have that `props` argument if we want to have access to the prop inside the function. I can `console.log` it to see the prop value:\n\n![Console-logged prop value](https://res.cloudinary.com/deepgram/image/upload/v1642110686/blog/2022/02/diving-into-vue-3-setup-function/console-prop-value.png)\n\nIn the template, we'll have it display like this. It is the same way we would do it in Vue 2:\n\n```html\n<template>\n  <div id=\"basic\">\n    <h1>Basic Component</h1>\n    <p>Employees: {{ numEmployees }}</p>\n    <div>{{ message }}</div>\n  </div>\n</template>\n```\n\n![Basic Component with prop](https://res.cloudinary.com/deepgram/image/upload/v1642110686/blog/2022/02/diving-into-vue-3-setup-function/basic-component-with-prop.png)\n\nIf we log `props` by itself to the console, like this:\n\n```js\nsetup(props) {\n  console.log(props);\n},\n```\n\nThen we see the props object, which looks like this:\n\n![Console-logged props object](https://res.cloudinary.com/deepgram/image/upload/v1642110686/blog/2022/02/diving-into-vue-3-setup-function/console-prop-object.png)\n\nThe object uses a `Proxy`, which is the new way that Vue 3 does reactivity (the details of what that is go beyond the scope of this post). Because props are reactive, they cannot easily be destructured in the setup function. If you want to understand more about that, [the docs explain it](https://v3.vuejs.org/guide/composition-api-setup.html#props). I don't find it necessary to destructure them, however (but I'm still very new to using Vue 3).\n\n#### Context\n\nThe second argument, `context`, gives us access to three properties that we had available in Vue 2 using the keyword this:\n\n*   `attrs` - (formerly `this.$attrs`) - An object containing the component's attributes\n\n*   `emit` - (formerly `this.$emit`) - A function that takes the event as argument\n\n*   `slots` - (formerly `this.$slots)` - An object containing the component's slots\n\nIf we only want to use one of these in the `setup` function, we can destructure the argument like this:\n\n```js\nexport default {\n  setup(props, { attrs }) {\n    console.log(attrs)\n  },\n}\n```\n\nThere is also another property, `expose`, which is useful in special cases. The [docs](https://v3.vuejs.org/guide/composition-api-setup.html#usage-with-templates) go over the example of using it when returning render functions from the `setup` function. That's a bit advanced for this series. If you have used `expose`, I would be interested to hear from you because I haven't used it myself!\n\n## Conclusion\n\nAnd that wraps up this post about the `setup` function. In the next post, we will be looking at `methods` and `computed` to see how we use those in Vue 3. And as always, feel free to reach out on [Twitter](https://twitter.com/sandra_rodgers_)!\n\n        ", "html": '<p>In this series of posts, I\u2019m diving into Vue 3 as someone who is new to the Composition API but not new to Vue in general. I\u2019m writing my impressions of how to get started with Vue 3 and comparing it to the way I would do things in Vue 2.</p>\n<p>Today, I\u2019ll take a look at the <code is:raw>setup</code> function that is new to Vue 3.</p>\n<p>And if you want to start at the beginning of the series, take a look at my first post: <a href="https://blog.deepgram.com/diving-into-vue-3-getting-started/">Diving into Vue 3: Getting Started</a>.</p>\n<h2 id="the-old-way-vue-2-options-api">The Old Way: Vue 2 Options API</h2>\n<p>The Options API is familiar to those of us who have used Vue 2. A single-file-component includes a <code is:raw>template</code>, <code is:raw>script</code>, and <code is:raw>style</code> section, and in the script section, we would use the <strong>options</strong> of the Options API, organized something like this:</p>\n<pre is:raw class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9">&lt;</span><span style="color: #7EE787">script</span><span style="color: #C9D1D9">&gt;</span></span>\n<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">export</span><span style="color: #FFA657"> </span><span style="color: #FF7B72">default</span><span style="color: #FFA657"> {</span></span>\n<span class="line"><span style="color: #FFA657">    </span><span style="color: #C9D1D9">name: </span><span style="color: #A5D6FF">&#39;ComponentName&#39;</span><span style="color: #FFA657">,</span></span>\n<span class="line"><span style="color: #FFA657">    </span><span style="color: #C9D1D9">components: {}</span><span style="color: #FFA657">,</span></span>\n<span class="line"><span style="color: #FFA657">    </span><span style="color: #C9D1D9">props: {}</span><span style="color: #FFA657">,</span></span>\n<span class="line"><span style="color: #FFA657">    </span><span style="color: #D2A8FF">data</span><span style="color: #FFA657">() </span><span style="color: #C9D1D9">{}</span><span style="color: #FFA657">,</span></span>\n<span class="line"><span style="color: #FFA657">    </span><span style="color: #C9D1D9">watch: {}</span><span style="color: #FFA657">,</span></span>\n<span class="line"><span style="color: #FFA657">    </span><span style="color: #C9D1D9">methods: {}</span><span style="color: #FFA657">,</span></span>\n<span class="line"><span style="color: #FFA657">    </span><span style="color: #D2A8FF">mounted</span><span style="color: #FFA657">() </span><span style="color: #C9D1D9">{}</span><span style="color: #FFA657">,</span></span>\n<span class="line"><span style="color: #FFA657">  }</span></span>\n<span class="line"><span style="color: #C9D1D9">&lt;/</span><span style="color: #7EE787">script</span><span style="color: #C9D1D9">&gt;</span></span></code></pre>\n<p>The Options API is all the properties and methods we get on our Vue instance, the instance we initialize when we set up the project in the <strong>main.js</strong> file (see my <a href="https://blog.deepgram.com/diving-into-vue-3-getting-started/">previous post</a> for more info on initializing the Vue application object).</p>\n<p>This organization of a component seems very easy to read at first glance, and it is one of the things that made me feel unafraid to jump into Vue initially. We clearly see how the different logic is separated by its type - <code is:raw>methods</code> versus <code is:raw>computed</code> versus <code is:raw>watch</code>.</p>\n<p>However, after becoming more experienced in using Vue and having worked with really large components, this actually starts to feel like a shortcoming because it forces us to jump around so much to follow the data as it moves through logic.</p>\n<h2 id="new-and-improved-way-vue-3-composition-api">New and Improved Way: Vue 3 Composition API</h2>\n<p>The Composition API is born from experience - the experience of struggling to keep track of logic jumping around within a Vue component, from <code is:raw>data</code> to <code is:raw>methods</code> to <code is:raw>watch</code> to <code is:raw>methods</code> again back to <code is:raw>watch</code> and so on\u2026</p>\n<p>And when we add a <strong>mixin</strong> to the mix (pun intended), jumping to a completely different file to follow the logic can be a huge headache since pieces of logic in the mixin can affect pieces of logic in the main component (rather than the mixin containing all the logic for a feature).</p>\n<p>The better way is not to separate the script into sections by options, but instead to organize by <em>logical concern for individual features</em>. The <code is:raw>setup</code> function lets us do that because we can write the logic for each feature, group it under a function that we name, then invoke all the functions within the scope of the setup function.</p>\n<p>This improvement has resulted in a new pattern called Vue \u2018composables\u2019, which is just this idea I described in the previous paragraph - grouping code by logical concern and making it into a reusable function. We\u2019ll learn more about composables in a later post, but the important thing to understand now is that the <code is:raw>setup</code> function is what makes it possible.</p>\n<h2 id="how-to-use-the-setup-function">How to Use the Setup Function</h2>\n<p>Now we\u2019ll get into the nitty-gritty of how to use the <code is:raw>setup</code> function.</p>\n<p>Technically, the <code is:raw>setup</code> function is another <strong>option</strong> you can use in the <strong>Options API</strong> since it can be added alongside the list of other option properties and lifecycle methods, like this:</p>\n<pre is:raw class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9">&lt;</span><span style="color: #7EE787">script</span><span style="color: #C9D1D9">&gt;</span></span>\n<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">export</span><span style="color: #FFA657"> </span><span style="color: #FF7B72">default</span><span style="color: #FFA657"> {</span></span>\n<span class="line"><span style="color: #FFA657">    </span><span style="color: #C9D1D9">name: </span><span style="color: #A5D6FF">&#39;ComponentName&#39;</span><span style="color: #FFA657">,</span></span>\n<span class="line"><span style="color: #FFA657">    </span><span style="color: #C9D1D9">components: {}</span><span style="color: #FFA657">,</span></span>\n<span class="line"><span style="color: #FFA657">    </span><span style="color: #D2A8FF">data</span><span style="color: #FFA657">() </span><span style="color: #C9D1D9">{}</span><span style="color: #FFA657">,</span></span>\n<span class="line"><span style="color: #FFA657">    </span><span style="color: #C9D1D9">methods: {}</span><span style="color: #FFA657">,</span></span>\n<span class="line"><span style="color: #FFA657">    </span><span style="color: #D2A8FF">mounted</span><span style="color: #FFA657">() </span><span style="color: #C9D1D9">{}</span><span style="color: #FFA657">,</span></span>\n<span class="line"><span style="color: #FFA657">    </span><span style="color: #D2A8FF">setup</span><span style="color: #FFA657">() </span><span style="color: #C9D1D9">{}</span><span style="color: #FFA657">,</span></span>\n<span class="line"><span style="color: #FFA657">  }</span></span>\n<span class="line"><span style="color: #C9D1D9">&lt;/</span><span style="color: #7EE787">script</span><span style="color: #C9D1D9">&gt;</span></span></code></pre>\n<p>However, since we are choosing to do things the Vue 3 way, we\u2019ll probably just want to dive in completely and use the <code is:raw>setup</code> function without all the other options since what we get with <code is:raw>setup</code> will make it unnecessary to use them.</p>\n<h3 id="example-using-setup">Example Using Setup</h3>\n<p>Here is a very simple example that shows the most basic thing we need to do in Vue - create a variable to represent some data. This is the basic template where we have a data value for a number of employees.</p>\n<pre is:raw class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9">&lt;</span><span style="color: #7EE787">template</span><span style="color: #C9D1D9">&gt;</span></span>\n<span class="line"><span style="color: #C9D1D9">  &lt;</span><span style="color: #7EE787">div</span><span style="color: #C9D1D9">&gt;</span></span>\n<span class="line"><span style="color: #C9D1D9">    &lt;</span><span style="color: #7EE787">h1</span><span style="color: #C9D1D9">&gt;Basic Component&lt;/</span><span style="color: #7EE787">h1</span><span style="color: #C9D1D9">&gt;</span></span>\n<span class="line"><span style="color: #C9D1D9">    &lt;</span><span style="color: #7EE787">p</span><span style="color: #C9D1D9">&gt;Employees: {{ numEmployees }}&lt;/</span><span style="color: #7EE787">p</span><span style="color: #C9D1D9">&gt;</span></span>\n<span class="line"><span style="color: #C9D1D9">  &lt;/</span><span style="color: #7EE787">div</span><span style="color: #C9D1D9">&gt;</span></span>\n<span class="line"><span style="color: #C9D1D9">&lt;/</span><span style="color: #7EE787">template</span><span style="color: #C9D1D9">&gt;</span></span></code></pre>\n<p>And here is what it would render as:</p>\n<p><img src="https://res.cloudinary.com/deepgram/image/upload/v1642110686/blog/2022/02/diving-into-vue-3-setup-function/basic-component.png" alt="Basic component"></p>\n<p><code is:raw>numEmployees</code> represents a number of people who work for a company. In Vue 2, in the script section, we would have created a data property using the <code is:raw>data()</code> option, like this:</p>\n<h4 id="vue-2">Vue 2</h4>\n<pre is:raw class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9">&lt;</span><span style="color: #7EE787">script</span><span style="color: #C9D1D9">&gt;</span></span>\n<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">export</span><span style="color: #FFA657"> </span><span style="color: #FF7B72">default</span><span style="color: #FFA657"> {</span></span>\n<span class="line"><span style="color: #FFA657">    </span><span style="color: #D2A8FF">data</span><span style="color: #FFA657">() </span><span style="color: #C9D1D9">{</span></span>\n<span class="line"><span style="color: #C9D1D9">      </span><span style="color: #FF7B72">return</span><span style="color: #C9D1D9"> {</span></span>\n<span class="line"><span style="color: #C9D1D9">        numEmployees: </span><span style="color: #79C0FF">0</span><span style="color: #C9D1D9">,</span></span>\n<span class="line"><span style="color: #C9D1D9">      }</span></span>\n<span class="line"><span style="color: #C9D1D9">    }</span><span style="color: #FFA657">,</span></span>\n<span class="line"><span style="color: #FFA657">  }</span></span>\n<span class="line"><span style="color: #C9D1D9">&lt;/</span><span style="color: #7EE787">script</span><span style="color: #C9D1D9">&gt;</span></span></code></pre>\n<p>In Vue 3, we will just create our variable inside the <code is:raw>setup</code> function, like this:</p>\n<h4 id="vue-3">Vue 3</h4>\n<pre is:raw class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9">&lt;</span><span style="color: #7EE787">script</span><span style="color: #C9D1D9">&gt;</span></span>\n<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">export</span><span style="color: #FFA657"> </span><span style="color: #FF7B72">default</span><span style="color: #FFA657"> {</span></span>\n<span class="line"><span style="color: #FFA657">    </span><span style="color: #D2A8FF">setup</span><span style="color: #FFA657">() </span><span style="color: #C9D1D9">{</span></span>\n<span class="line"><span style="color: #C9D1D9">      </span><span style="color: #FF7B72">const</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">numEmployees</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">10</span></span>\n<span class="line"><span style="color: #C9D1D9">      </span><span style="color: #FF7B72">return</span><span style="color: #C9D1D9"> { numEmployees }</span></span>\n<span class="line"><span style="color: #C9D1D9">    }</span><span style="color: #FFA657">,</span></span>\n<span class="line"><span style="color: #FFA657">  }</span></span>\n<span class="line"><span style="color: #C9D1D9">&lt;/</span><span style="color: #7EE787">script</span><span style="color: #C9D1D9">&gt;</span></span></code></pre>\n<p>However, if we want that data property for numEmployees to be <strong>reactive</strong> (so it updates in the template when it changes in script), we have to use <code is:raw>ref()</code> around the value, and we have to import ref in order to use it:</p>\n<pre is:raw class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9">&lt;</span><span style="color: #7EE787">script</span><span style="color: #C9D1D9">&gt;</span></span>\n<span class="line"><span style="color: #C9D1D9">import </span><span style="color: #FF7B72">{</span><span style="color: #C9D1D9"> ref </span><span style="color: #FF7B72">}</span><span style="color: #C9D1D9"> from &quot;vue&quot;;</span></span>\n<span class="line"><span style="color: #C9D1D9">export default </span><span style="color: #FF7B72">{</span></span>\n<span class="line"><span style="color: #C9D1D9">  name: </span><span style="color: #A5D6FF">&quot;BasicComponent&quot;</span><span style="color: #C9D1D9">,</span></span>\n<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #D2A8FF">setup</span><span style="color: #C9D1D9">() {</span></span>\n<span class="line"><span style="color: #C9D1D9">    const numEmployees </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">ref</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">10</span><span style="color: #C9D1D9">);</span></span>\n<span class="line"><span style="color: #C9D1D9">    return { numEmployees };</span></span>\n<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">}</span><span style="color: #C9D1D9">,</span></span>\n<span class="line"><span style="color: #C9D1D9">};</span></span>\n<span class="line"><span style="color: #C9D1D9">&lt;/</span><span style="color: #7EE787">script</span><span style="color: #C9D1D9">&gt;</span></span></code></pre>\n<p>We also have to <code is:raw>return</code> an object with that data value; otherwise, it will not be available in the template.</p>\n<h3 id="important-facts-about-the-setup-function">Important Facts about the Setup Function</h3>\n<ol>\n<li>\n<p><code is:raw>setup</code> is a function, and it is also referred to as a \u2018hook\u2019 in a general sense because it is similar to the lifecycle methods in that <em>timing is important</em>. <code is:raw>Setup</code> runs before everything else - before all the lifecycle methods and the mounting of the component (although <strong>not before props are resolved,</strong> so you <strong>will have access to props</strong> in the setup function).</p>\n</li>\n<li>\n<p>A big difference from Vue 2 is that we won\u2019t be seeing the keyword <code is:raw>this</code> all over the place to reference data values inside a component. In Vue 3, <code is:raw>this</code> in the way it was used in the Options API is not available in the <code is:raw>setup</code> function since <code is:raw>setup</code> runs so early.</p>\n</li>\n<li>\n<p><code is:raw>setup</code> must return an object. The object contains everything from within the scope of the setup function that you want to make available in the template.</p>\n</li>\n<li>\n<p>Variables aren\u2019t reactive in the <code is:raw>setup</code> function unless you use <code is:raw>ref</code> with them (or <code is:raw>reactive</code>, but for now, we only need to concern ourselves with <code is:raw>ref</code>. Stay tuned for a post on <code is:raw>ref</code> and <code is:raw>reactive</code> in the near future).</p>\n</li>\n<li>\n<p><code is:raw>setup</code> can take two arguments - <code is:raw>props</code> and <code is:raw>context</code> - which we\u2019ll take a look at more closely in the next section.</p>\n</li>\n</ol>\n<h3 id="props-and-context">Props and Context</h3>\n<p><code is:raw>setup</code> can take two arguments, <code is:raw>props</code> and <code is:raw>context</code>.</p>\n<h4 id="props">Props</h4>\n<p>In this example a prop <code is:raw>message</code> has been added that wasn\u2019t there before. The prop is just a simple string. It\u2019s passed down the same way as in Vue 2, as we can see in the example:</p>\n<h4 id="parent-component">Parent Component</h4>\n<pre is:raw class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9">&lt;</span><span style="color: #7EE787">template</span><span style="color: #C9D1D9">&gt;</span></span>\n<span class="line"><span style="color: #C9D1D9">  &lt;</span><span style="color: #7EE787">basic-component</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">:message</span><span style="color: #C9D1D9">=</span><span style="color: #A5D6FF">&quot;message&quot;</span><span style="color: #C9D1D9"> /&gt;</span></span>\n<span class="line"><span style="color: #C9D1D9">&lt;/</span><span style="color: #7EE787">template</span><span style="color: #C9D1D9">&gt;</span></span></code></pre>\n<h4 id="child-component">Child Component</h4>\n<pre is:raw class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9">&lt;</span><span style="color: #7EE787">script</span><span style="color: #C9D1D9">&gt;</span></span>\n<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">import</span><span style="color: #C9D1D9"> { ref } </span><span style="color: #FF7B72">from</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">&#39;vue&#39;</span></span>\n<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">export</span><span style="color: #FFA657"> </span><span style="color: #FF7B72">default</span><span style="color: #FFA657"> {</span></span>\n<span class="line"><span style="color: #FFA657">    </span><span style="color: #C9D1D9">name: </span><span style="color: #A5D6FF">&#39;BasicComponent&#39;</span><span style="color: #FFA657">,</span></span>\n<span class="line"><span style="color: #FFA657">    </span><span style="color: #C9D1D9">props: {</span></span>\n<span class="line"><span style="color: #C9D1D9">      message: String,</span></span>\n<span class="line"><span style="color: #C9D1D9">    }</span><span style="color: #FFA657">,</span></span>\n<span class="line"><span style="color: #FFA657">    </span><span style="color: #D2A8FF">setup</span><span style="color: #FFA657">(props) </span><span style="color: #C9D1D9">{</span></span>\n<span class="line"><span style="color: #C9D1D9">      console.</span><span style="color: #D2A8FF">log</span><span style="color: #C9D1D9">(props.message)</span></span>\n<span class="line"></span>\n<span class="line"><span style="color: #C9D1D9">      </span><span style="color: #FF7B72">const</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">numEmployees</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">ref</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">10</span><span style="color: #C9D1D9">)</span></span>\n<span class="line"></span>\n<span class="line"><span style="color: #C9D1D9">      </span><span style="color: #FF7B72">return</span><span style="color: #C9D1D9"> { numEmployees }</span></span>\n<span class="line"><span style="color: #C9D1D9">    }</span><span style="color: #FFA657">,</span></span>\n<span class="line"><span style="color: #FFA657">  }</span></span>\n<span class="line"><span style="color: #C9D1D9">&lt;/</span><span style="color: #7EE787">script</span><span style="color: #C9D1D9">&gt;</span></span></code></pre>\n<p>The <code is:raw>setup</code> function must have that <code is:raw>props</code> argument if we want to have access to the prop inside the function. I can <code is:raw>console.log</code> it to see the prop value:</p>\n<p><img src="https://res.cloudinary.com/deepgram/image/upload/v1642110686/blog/2022/02/diving-into-vue-3-setup-function/console-prop-value.png" alt="Console-logged prop value"></p>\n<p>In the template, we\u2019ll have it display like this. It is the same way we would do it in Vue 2:</p>\n<pre is:raw class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9">&lt;</span><span style="color: #7EE787">template</span><span style="color: #C9D1D9">&gt;</span></span>\n<span class="line"><span style="color: #C9D1D9">  &lt;</span><span style="color: #7EE787">div</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">id</span><span style="color: #C9D1D9">=</span><span style="color: #A5D6FF">&quot;basic&quot;</span><span style="color: #C9D1D9">&gt;</span></span>\n<span class="line"><span style="color: #C9D1D9">    &lt;</span><span style="color: #7EE787">h1</span><span style="color: #C9D1D9">&gt;Basic Component&lt;/</span><span style="color: #7EE787">h1</span><span style="color: #C9D1D9">&gt;</span></span>\n<span class="line"><span style="color: #C9D1D9">    &lt;</span><span style="color: #7EE787">p</span><span style="color: #C9D1D9">&gt;Employees: {{ numEmployees }}&lt;/</span><span style="color: #7EE787">p</span><span style="color: #C9D1D9">&gt;</span></span>\n<span class="line"><span style="color: #C9D1D9">    &lt;</span><span style="color: #7EE787">div</span><span style="color: #C9D1D9">&gt;{{ message }}&lt;/</span><span style="color: #7EE787">div</span><span style="color: #C9D1D9">&gt;</span></span>\n<span class="line"><span style="color: #C9D1D9">  &lt;/</span><span style="color: #7EE787">div</span><span style="color: #C9D1D9">&gt;</span></span>\n<span class="line"><span style="color: #C9D1D9">&lt;/</span><span style="color: #7EE787">template</span><span style="color: #C9D1D9">&gt;</span></span></code></pre>\n<p><img src="https://res.cloudinary.com/deepgram/image/upload/v1642110686/blog/2022/02/diving-into-vue-3-setup-function/basic-component-with-prop.png" alt="Basic Component with prop"></p>\n<p>If we log <code is:raw>props</code> by itself to the console, like this:</p>\n<pre is:raw class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #D2A8FF">setup</span><span style="color: #C9D1D9">(props) {</span></span>\n<span class="line"><span style="color: #C9D1D9">  console.</span><span style="color: #D2A8FF">log</span><span style="color: #C9D1D9">(props);</span></span>\n<span class="line"><span style="color: #C9D1D9">},</span></span></code></pre>\n<p>Then we see the props object, which looks like this:</p>\n<p><img src="https://res.cloudinary.com/deepgram/image/upload/v1642110686/blog/2022/02/diving-into-vue-3-setup-function/console-prop-object.png" alt="Console-logged props object"></p>\n<p>The object uses a <code is:raw>Proxy</code>, which is the new way that Vue 3 does reactivity (the details of what that is go beyond the scope of this post). Because props are reactive, they cannot easily be destructured in the setup function. If you want to understand more about that, <a href="https://v3.vuejs.org/guide/composition-api-setup.html#props">the docs explain it</a>. I don\u2019t find it necessary to destructure them, however (but I\u2019m still very new to using Vue 3).</p>\n<h4 id="context">Context</h4>\n<p>The second argument, <code is:raw>context</code>, gives us access to three properties that we had available in Vue 2 using the keyword this:</p>\n<ul>\n<li>\n<p><code is:raw>attrs</code> - (formerly <code is:raw>this.$attrs</code>) - An object containing the component\u2019s attributes</p>\n</li>\n<li>\n<p><code is:raw>emit</code> - (formerly <code is:raw>this.$emit</code>) - A function that takes the event as argument</p>\n</li>\n<li>\n<p><code is:raw>slots</code> - (formerly <code is:raw>this.$slots)</code> - An object containing the component\u2019s slots</p>\n</li>\n</ul>\n<p>If we only want to use one of these in the <code is:raw>setup</code> function, we can destructure the argument like this:</p>\n<pre is:raw class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #FF7B72">export</span><span style="color: #FFA657"> </span><span style="color: #FF7B72">default</span><span style="color: #FFA657"> {</span></span>\n<span class="line"><span style="color: #FFA657">  </span><span style="color: #D2A8FF">setup</span><span style="color: #FFA657">(props, { attrs }) </span><span style="color: #C9D1D9">{</span></span>\n<span class="line"><span style="color: #C9D1D9">    console.</span><span style="color: #D2A8FF">log</span><span style="color: #C9D1D9">(attrs)</span></span>\n<span class="line"><span style="color: #C9D1D9">  }</span><span style="color: #FFA657">,</span></span>\n<span class="line"><span style="color: #FFA657">}</span></span></code></pre>\n<p>There is also another property, <code is:raw>expose</code>, which is useful in special cases. The <a href="https://v3.vuejs.org/guide/composition-api-setup.html#usage-with-templates">docs</a> go over the example of using it when returning render functions from the <code is:raw>setup</code> function. That\u2019s a bit advanced for this series. If you have used <code is:raw>expose</code>, I would be interested to hear from you because I haven\u2019t used it myself!</p>\n<h2 id="conclusion">Conclusion</h2>\n<p>And that wraps up this post about the <code is:raw>setup</code> function. In the next post, we will be looking at <code is:raw>methods</code> and <code is:raw>computed</code> to see how we use those in Vue 3. And as always, feel free to reach out on <a href="https://twitter.com/sandra_rodgers_">Twitter</a>!</p>' }, "file": "/Users/sandrarodgers/web-next/blog/src/content/blog/posts/diving-into-vue-3-setup-function/index.md" };
function rawContent() {
  return "\nIn this series of posts, I'm diving into Vue 3 as someone who is new to the Composition API but not new to Vue in general. I'm writing my impressions of how to get started with Vue 3 and comparing it to the way I would do things in Vue 2.\n\nToday, I'll take a look at the `setup` function that is new to Vue 3.\n\nAnd if you want to start at the beginning of the series, take a look at my first post: [Diving into Vue 3: Getting Started](https://blog.deepgram.com/diving-into-vue-3-getting-started/).\n\n## The Old Way: Vue 2 Options API\n\nThe Options API is familiar to those of us who have used Vue 2. A single-file-component includes a `template`, `script`, and `style` section, and in the script section, we would use the **options** of the Options API, organized something like this:\n\n```html\n<script>\n  export default {\n    name: 'ComponentName',\n    components: {},\n    props: {},\n    data() {},\n    watch: {},\n    methods: {},\n    mounted() {},\n  }\n<\/script>\n```\n\nThe Options API is all the properties and methods we get on our Vue instance, the instance we initialize when we set up the project in the **main.js** file (see my [previous post](https://blog.deepgram.com/diving-into-vue-3-getting-started/) for more info on initializing the Vue application object).\n\nThis organization of a component seems very easy to read at first glance, and it is one of the things that made me feel unafraid to jump into Vue initially. We clearly see how the different logic is separated by its type - `methods` versus `computed` versus `watch`.\n\nHowever, after becoming more experienced in using Vue and having worked with really large components, this actually starts to feel like a shortcoming because it forces us to jump around so much to follow the data as it moves through logic.\n\n## New and Improved Way: Vue 3 Composition API\n\nThe Composition API is born from experience - the experience of struggling to keep track of logic jumping around within a Vue component, from `data` to `methods` to `watch` to `methods` again back to `watch` and so on...\n\nAnd when we add a **mixin** to the mix (pun intended), jumping to a completely different file to follow the logic can be a huge headache since pieces of logic in the mixin can affect pieces of logic in the main component (rather than the mixin containing all the logic for a feature).\n\nThe better way is not to separate the script into sections by options, but instead to organize by *logical concern for individual features*. The `setup` function lets us do that because we can write the logic for each feature, group it under a function that we name, then invoke all the functions within the scope of the setup function.\n\nThis improvement has resulted in a new pattern called Vue 'composables', which is just this idea I described in the previous paragraph - grouping code by logical concern and making it into a reusable function. We'll learn more about composables in a later post, but the important thing to understand now is that the `setup` function is what makes it possible.\n\n## How to Use the Setup Function\n\nNow we'll get into the nitty-gritty of how to use the `setup` function.\n\nTechnically, the `setup` function is another **option** you can use in the **Options API** since it can be added alongside the list of other option properties and lifecycle methods, like this:\n\n```html\n<script>\n  export default {\n    name: 'ComponentName',\n    components: {},\n    data() {},\n    methods: {},\n    mounted() {},\n    setup() {},\n  }\n<\/script>\n```\n\nHowever, since we are choosing to do things the Vue 3 way, we'll probably just want to dive in completely and use the `setup` function without all the other options since what we get with `setup` will make it unnecessary to use them.\n\n### Example Using Setup\n\nHere is a very simple example that shows the most basic thing we need to do in Vue - create a variable to represent some data. This is the basic template where we have a data value for a number of employees.\n\n```html\n<template>\n  <div>\n    <h1>Basic Component</h1>\n    <p>Employees: {{ numEmployees }}</p>\n  </div>\n</template>\n```\n\nAnd here is what it would render as:\n\n![Basic component](https://res.cloudinary.com/deepgram/image/upload/v1642110686/blog/2022/02/diving-into-vue-3-setup-function/basic-component.png)\n\n`numEmployees` represents a number of people who work for a company. In Vue 2, in the script section, we would have created a data property using the `data()` option, like this:\n\n#### Vue 2\n\n```html\n<script>\n  export default {\n    data() {\n      return {\n        numEmployees: 0,\n      }\n    },\n  }\n<\/script>\n```\n\nIn Vue 3, we will just create our variable inside the `setup` function, like this:\n\n#### Vue 3\n\n```html\n<script>\n  export default {\n    setup() {\n      const numEmployees = 10\n      return { numEmployees }\n    },\n  }\n<\/script>\n```\n\nHowever, if we want that data property for numEmployees to be **reactive** (so it updates in the template when it changes in script), we have to use `ref()` around the value, and we have to import ref in order to use it:\n\n```js\n<script>\nimport { ref } from \"vue\";\nexport default {\n  name: \"BasicComponent\",\n  setup() {\n    const numEmployees = ref(10);\n    return { numEmployees };\n  },\n};\n<\/script>\n```\n\nWe also have to `return` an object with that data value; otherwise, it will not be available in the template.\n\n### Important Facts about the Setup Function\n\n1.  `setup` is a function, and it is also referred to as a 'hook' in a general sense because it is similar to the lifecycle methods in that *timing is important*. `Setup` runs before everything else - before all the lifecycle methods and the mounting of the component (although **not before props are resolved,** so you **will have access to props** in the setup function).\n\n2.  A big difference from Vue 2 is that we won't be seeing the keyword `this` all over the place to reference data values inside a component. In Vue 3, `this` in the way it was used in the Options API is not available in the `setup` function since `setup` runs so early.\n\n3.  `setup` must return an object. The object contains everything from within the scope of the setup function that you want to make available in the template.\n\n4.  Variables aren't reactive in the `setup` function unless you use `ref` with them (or `reactive`, but for now, we only need to concern ourselves with `ref`. Stay tuned for a post on `ref` and `reactive` in the near future).\n\n5.  `setup` can take two arguments - `props` and `context` - which we'll take a look at more closely in the next section.\n\n### Props and Context\n\n`setup` can take two arguments, `props` and `context`.\n\n#### Props\n\nIn this example a prop `message` has been added that wasn't there before. The prop is just a simple string. It's passed down the same way as in Vue 2, as we can see in the example:\n\n#### Parent Component\n\n```html\n<template>\n  <basic-component :message=\"message\" />\n</template>\n```\n\n#### Child Component\n\n```html\n<script>\n  import { ref } from 'vue'\n  export default {\n    name: 'BasicComponent',\n    props: {\n      message: String,\n    },\n    setup(props) {\n      console.log(props.message)\n\n      const numEmployees = ref(10)\n\n      return { numEmployees }\n    },\n  }\n<\/script>\n```\n\nThe `setup` function must have that `props` argument if we want to have access to the prop inside the function. I can `console.log` it to see the prop value:\n\n![Console-logged prop value](https://res.cloudinary.com/deepgram/image/upload/v1642110686/blog/2022/02/diving-into-vue-3-setup-function/console-prop-value.png)\n\nIn the template, we'll have it display like this. It is the same way we would do it in Vue 2:\n\n```html\n<template>\n  <div id=\"basic\">\n    <h1>Basic Component</h1>\n    <p>Employees: {{ numEmployees }}</p>\n    <div>{{ message }}</div>\n  </div>\n</template>\n```\n\n![Basic Component with prop](https://res.cloudinary.com/deepgram/image/upload/v1642110686/blog/2022/02/diving-into-vue-3-setup-function/basic-component-with-prop.png)\n\nIf we log `props` by itself to the console, like this:\n\n```js\nsetup(props) {\n  console.log(props);\n},\n```\n\nThen we see the props object, which looks like this:\n\n![Console-logged props object](https://res.cloudinary.com/deepgram/image/upload/v1642110686/blog/2022/02/diving-into-vue-3-setup-function/console-prop-object.png)\n\nThe object uses a `Proxy`, which is the new way that Vue 3 does reactivity (the details of what that is go beyond the scope of this post). Because props are reactive, they cannot easily be destructured in the setup function. If you want to understand more about that, [the docs explain it](https://v3.vuejs.org/guide/composition-api-setup.html#props). I don't find it necessary to destructure them, however (but I'm still very new to using Vue 3).\n\n#### Context\n\nThe second argument, `context`, gives us access to three properties that we had available in Vue 2 using the keyword this:\n\n*   `attrs` - (formerly `this.$attrs`) - An object containing the component's attributes\n\n*   `emit` - (formerly `this.$emit`) - A function that takes the event as argument\n\n*   `slots` - (formerly `this.$slots)` - An object containing the component's slots\n\nIf we only want to use one of these in the `setup` function, we can destructure the argument like this:\n\n```js\nexport default {\n  setup(props, { attrs }) {\n    console.log(attrs)\n  },\n}\n```\n\nThere is also another property, `expose`, which is useful in special cases. The [docs](https://v3.vuejs.org/guide/composition-api-setup.html#usage-with-templates) go over the example of using it when returning render functions from the `setup` function. That's a bit advanced for this series. If you have used `expose`, I would be interested to hear from you because I haven't used it myself!\n\n## Conclusion\n\nAnd that wraps up this post about the `setup` function. In the next post, we will be looking at `methods` and `computed` to see how we use those in Vue 3. And as always, feel free to reach out on [Twitter](https://twitter.com/sandra_rodgers_)!\n\n        ";
}
function compiledContent() {
  return '<p>In this series of posts, I\u2019m diving into Vue 3 as someone who is new to the Composition API but not new to Vue in general. I\u2019m writing my impressions of how to get started with Vue 3 and comparing it to the way I would do things in Vue 2.</p>\n<p>Today, I\u2019ll take a look at the <code is:raw>setup</code> function that is new to Vue 3.</p>\n<p>And if you want to start at the beginning of the series, take a look at my first post: <a href="https://blog.deepgram.com/diving-into-vue-3-getting-started/">Diving into Vue 3: Getting Started</a>.</p>\n<h2 id="the-old-way-vue-2-options-api">The Old Way: Vue 2 Options API</h2>\n<p>The Options API is familiar to those of us who have used Vue 2. A single-file-component includes a <code is:raw>template</code>, <code is:raw>script</code>, and <code is:raw>style</code> section, and in the script section, we would use the <strong>options</strong> of the Options API, organized something like this:</p>\n<pre is:raw class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9">&lt;</span><span style="color: #7EE787">script</span><span style="color: #C9D1D9">&gt;</span></span>\n<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">export</span><span style="color: #FFA657"> </span><span style="color: #FF7B72">default</span><span style="color: #FFA657"> {</span></span>\n<span class="line"><span style="color: #FFA657">    </span><span style="color: #C9D1D9">name: </span><span style="color: #A5D6FF">&#39;ComponentName&#39;</span><span style="color: #FFA657">,</span></span>\n<span class="line"><span style="color: #FFA657">    </span><span style="color: #C9D1D9">components: {}</span><span style="color: #FFA657">,</span></span>\n<span class="line"><span style="color: #FFA657">    </span><span style="color: #C9D1D9">props: {}</span><span style="color: #FFA657">,</span></span>\n<span class="line"><span style="color: #FFA657">    </span><span style="color: #D2A8FF">data</span><span style="color: #FFA657">() </span><span style="color: #C9D1D9">{}</span><span style="color: #FFA657">,</span></span>\n<span class="line"><span style="color: #FFA657">    </span><span style="color: #C9D1D9">watch: {}</span><span style="color: #FFA657">,</span></span>\n<span class="line"><span style="color: #FFA657">    </span><span style="color: #C9D1D9">methods: {}</span><span style="color: #FFA657">,</span></span>\n<span class="line"><span style="color: #FFA657">    </span><span style="color: #D2A8FF">mounted</span><span style="color: #FFA657">() </span><span style="color: #C9D1D9">{}</span><span style="color: #FFA657">,</span></span>\n<span class="line"><span style="color: #FFA657">  }</span></span>\n<span class="line"><span style="color: #C9D1D9">&lt;/</span><span style="color: #7EE787">script</span><span style="color: #C9D1D9">&gt;</span></span></code></pre>\n<p>The Options API is all the properties and methods we get on our Vue instance, the instance we initialize when we set up the project in the <strong>main.js</strong> file (see my <a href="https://blog.deepgram.com/diving-into-vue-3-getting-started/">previous post</a> for more info on initializing the Vue application object).</p>\n<p>This organization of a component seems very easy to read at first glance, and it is one of the things that made me feel unafraid to jump into Vue initially. We clearly see how the different logic is separated by its type - <code is:raw>methods</code> versus <code is:raw>computed</code> versus <code is:raw>watch</code>.</p>\n<p>However, after becoming more experienced in using Vue and having worked with really large components, this actually starts to feel like a shortcoming because it forces us to jump around so much to follow the data as it moves through logic.</p>\n<h2 id="new-and-improved-way-vue-3-composition-api">New and Improved Way: Vue 3 Composition API</h2>\n<p>The Composition API is born from experience - the experience of struggling to keep track of logic jumping around within a Vue component, from <code is:raw>data</code> to <code is:raw>methods</code> to <code is:raw>watch</code> to <code is:raw>methods</code> again back to <code is:raw>watch</code> and so on\u2026</p>\n<p>And when we add a <strong>mixin</strong> to the mix (pun intended), jumping to a completely different file to follow the logic can be a huge headache since pieces of logic in the mixin can affect pieces of logic in the main component (rather than the mixin containing all the logic for a feature).</p>\n<p>The better way is not to separate the script into sections by options, but instead to organize by <em>logical concern for individual features</em>. The <code is:raw>setup</code> function lets us do that because we can write the logic for each feature, group it under a function that we name, then invoke all the functions within the scope of the setup function.</p>\n<p>This improvement has resulted in a new pattern called Vue \u2018composables\u2019, which is just this idea I described in the previous paragraph - grouping code by logical concern and making it into a reusable function. We\u2019ll learn more about composables in a later post, but the important thing to understand now is that the <code is:raw>setup</code> function is what makes it possible.</p>\n<h2 id="how-to-use-the-setup-function">How to Use the Setup Function</h2>\n<p>Now we\u2019ll get into the nitty-gritty of how to use the <code is:raw>setup</code> function.</p>\n<p>Technically, the <code is:raw>setup</code> function is another <strong>option</strong> you can use in the <strong>Options API</strong> since it can be added alongside the list of other option properties and lifecycle methods, like this:</p>\n<pre is:raw class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9">&lt;</span><span style="color: #7EE787">script</span><span style="color: #C9D1D9">&gt;</span></span>\n<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">export</span><span style="color: #FFA657"> </span><span style="color: #FF7B72">default</span><span style="color: #FFA657"> {</span></span>\n<span class="line"><span style="color: #FFA657">    </span><span style="color: #C9D1D9">name: </span><span style="color: #A5D6FF">&#39;ComponentName&#39;</span><span style="color: #FFA657">,</span></span>\n<span class="line"><span style="color: #FFA657">    </span><span style="color: #C9D1D9">components: {}</span><span style="color: #FFA657">,</span></span>\n<span class="line"><span style="color: #FFA657">    </span><span style="color: #D2A8FF">data</span><span style="color: #FFA657">() </span><span style="color: #C9D1D9">{}</span><span style="color: #FFA657">,</span></span>\n<span class="line"><span style="color: #FFA657">    </span><span style="color: #C9D1D9">methods: {}</span><span style="color: #FFA657">,</span></span>\n<span class="line"><span style="color: #FFA657">    </span><span style="color: #D2A8FF">mounted</span><span style="color: #FFA657">() </span><span style="color: #C9D1D9">{}</span><span style="color: #FFA657">,</span></span>\n<span class="line"><span style="color: #FFA657">    </span><span style="color: #D2A8FF">setup</span><span style="color: #FFA657">() </span><span style="color: #C9D1D9">{}</span><span style="color: #FFA657">,</span></span>\n<span class="line"><span style="color: #FFA657">  }</span></span>\n<span class="line"><span style="color: #C9D1D9">&lt;/</span><span style="color: #7EE787">script</span><span style="color: #C9D1D9">&gt;</span></span></code></pre>\n<p>However, since we are choosing to do things the Vue 3 way, we\u2019ll probably just want to dive in completely and use the <code is:raw>setup</code> function without all the other options since what we get with <code is:raw>setup</code> will make it unnecessary to use them.</p>\n<h3 id="example-using-setup">Example Using Setup</h3>\n<p>Here is a very simple example that shows the most basic thing we need to do in Vue - create a variable to represent some data. This is the basic template where we have a data value for a number of employees.</p>\n<pre is:raw class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9">&lt;</span><span style="color: #7EE787">template</span><span style="color: #C9D1D9">&gt;</span></span>\n<span class="line"><span style="color: #C9D1D9">  &lt;</span><span style="color: #7EE787">div</span><span style="color: #C9D1D9">&gt;</span></span>\n<span class="line"><span style="color: #C9D1D9">    &lt;</span><span style="color: #7EE787">h1</span><span style="color: #C9D1D9">&gt;Basic Component&lt;/</span><span style="color: #7EE787">h1</span><span style="color: #C9D1D9">&gt;</span></span>\n<span class="line"><span style="color: #C9D1D9">    &lt;</span><span style="color: #7EE787">p</span><span style="color: #C9D1D9">&gt;Employees: {{ numEmployees }}&lt;/</span><span style="color: #7EE787">p</span><span style="color: #C9D1D9">&gt;</span></span>\n<span class="line"><span style="color: #C9D1D9">  &lt;/</span><span style="color: #7EE787">div</span><span style="color: #C9D1D9">&gt;</span></span>\n<span class="line"><span style="color: #C9D1D9">&lt;/</span><span style="color: #7EE787">template</span><span style="color: #C9D1D9">&gt;</span></span></code></pre>\n<p>And here is what it would render as:</p>\n<p><img src="https://res.cloudinary.com/deepgram/image/upload/v1642110686/blog/2022/02/diving-into-vue-3-setup-function/basic-component.png" alt="Basic component"></p>\n<p><code is:raw>numEmployees</code> represents a number of people who work for a company. In Vue 2, in the script section, we would have created a data property using the <code is:raw>data()</code> option, like this:</p>\n<h4 id="vue-2">Vue 2</h4>\n<pre is:raw class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9">&lt;</span><span style="color: #7EE787">script</span><span style="color: #C9D1D9">&gt;</span></span>\n<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">export</span><span style="color: #FFA657"> </span><span style="color: #FF7B72">default</span><span style="color: #FFA657"> {</span></span>\n<span class="line"><span style="color: #FFA657">    </span><span style="color: #D2A8FF">data</span><span style="color: #FFA657">() </span><span style="color: #C9D1D9">{</span></span>\n<span class="line"><span style="color: #C9D1D9">      </span><span style="color: #FF7B72">return</span><span style="color: #C9D1D9"> {</span></span>\n<span class="line"><span style="color: #C9D1D9">        numEmployees: </span><span style="color: #79C0FF">0</span><span style="color: #C9D1D9">,</span></span>\n<span class="line"><span style="color: #C9D1D9">      }</span></span>\n<span class="line"><span style="color: #C9D1D9">    }</span><span style="color: #FFA657">,</span></span>\n<span class="line"><span style="color: #FFA657">  }</span></span>\n<span class="line"><span style="color: #C9D1D9">&lt;/</span><span style="color: #7EE787">script</span><span style="color: #C9D1D9">&gt;</span></span></code></pre>\n<p>In Vue 3, we will just create our variable inside the <code is:raw>setup</code> function, like this:</p>\n<h4 id="vue-3">Vue 3</h4>\n<pre is:raw class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9">&lt;</span><span style="color: #7EE787">script</span><span style="color: #C9D1D9">&gt;</span></span>\n<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">export</span><span style="color: #FFA657"> </span><span style="color: #FF7B72">default</span><span style="color: #FFA657"> {</span></span>\n<span class="line"><span style="color: #FFA657">    </span><span style="color: #D2A8FF">setup</span><span style="color: #FFA657">() </span><span style="color: #C9D1D9">{</span></span>\n<span class="line"><span style="color: #C9D1D9">      </span><span style="color: #FF7B72">const</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">numEmployees</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">10</span></span>\n<span class="line"><span style="color: #C9D1D9">      </span><span style="color: #FF7B72">return</span><span style="color: #C9D1D9"> { numEmployees }</span></span>\n<span class="line"><span style="color: #C9D1D9">    }</span><span style="color: #FFA657">,</span></span>\n<span class="line"><span style="color: #FFA657">  }</span></span>\n<span class="line"><span style="color: #C9D1D9">&lt;/</span><span style="color: #7EE787">script</span><span style="color: #C9D1D9">&gt;</span></span></code></pre>\n<p>However, if we want that data property for numEmployees to be <strong>reactive</strong> (so it updates in the template when it changes in script), we have to use <code is:raw>ref()</code> around the value, and we have to import ref in order to use it:</p>\n<pre is:raw class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9">&lt;</span><span style="color: #7EE787">script</span><span style="color: #C9D1D9">&gt;</span></span>\n<span class="line"><span style="color: #C9D1D9">import </span><span style="color: #FF7B72">{</span><span style="color: #C9D1D9"> ref </span><span style="color: #FF7B72">}</span><span style="color: #C9D1D9"> from &quot;vue&quot;;</span></span>\n<span class="line"><span style="color: #C9D1D9">export default </span><span style="color: #FF7B72">{</span></span>\n<span class="line"><span style="color: #C9D1D9">  name: </span><span style="color: #A5D6FF">&quot;BasicComponent&quot;</span><span style="color: #C9D1D9">,</span></span>\n<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #D2A8FF">setup</span><span style="color: #C9D1D9">() {</span></span>\n<span class="line"><span style="color: #C9D1D9">    const numEmployees </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">ref</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">10</span><span style="color: #C9D1D9">);</span></span>\n<span class="line"><span style="color: #C9D1D9">    return { numEmployees };</span></span>\n<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">}</span><span style="color: #C9D1D9">,</span></span>\n<span class="line"><span style="color: #C9D1D9">};</span></span>\n<span class="line"><span style="color: #C9D1D9">&lt;/</span><span style="color: #7EE787">script</span><span style="color: #C9D1D9">&gt;</span></span></code></pre>\n<p>We also have to <code is:raw>return</code> an object with that data value; otherwise, it will not be available in the template.</p>\n<h3 id="important-facts-about-the-setup-function">Important Facts about the Setup Function</h3>\n<ol>\n<li>\n<p><code is:raw>setup</code> is a function, and it is also referred to as a \u2018hook\u2019 in a general sense because it is similar to the lifecycle methods in that <em>timing is important</em>. <code is:raw>Setup</code> runs before everything else - before all the lifecycle methods and the mounting of the component (although <strong>not before props are resolved,</strong> so you <strong>will have access to props</strong> in the setup function).</p>\n</li>\n<li>\n<p>A big difference from Vue 2 is that we won\u2019t be seeing the keyword <code is:raw>this</code> all over the place to reference data values inside a component. In Vue 3, <code is:raw>this</code> in the way it was used in the Options API is not available in the <code is:raw>setup</code> function since <code is:raw>setup</code> runs so early.</p>\n</li>\n<li>\n<p><code is:raw>setup</code> must return an object. The object contains everything from within the scope of the setup function that you want to make available in the template.</p>\n</li>\n<li>\n<p>Variables aren\u2019t reactive in the <code is:raw>setup</code> function unless you use <code is:raw>ref</code> with them (or <code is:raw>reactive</code>, but for now, we only need to concern ourselves with <code is:raw>ref</code>. Stay tuned for a post on <code is:raw>ref</code> and <code is:raw>reactive</code> in the near future).</p>\n</li>\n<li>\n<p><code is:raw>setup</code> can take two arguments - <code is:raw>props</code> and <code is:raw>context</code> - which we\u2019ll take a look at more closely in the next section.</p>\n</li>\n</ol>\n<h3 id="props-and-context">Props and Context</h3>\n<p><code is:raw>setup</code> can take two arguments, <code is:raw>props</code> and <code is:raw>context</code>.</p>\n<h4 id="props">Props</h4>\n<p>In this example a prop <code is:raw>message</code> has been added that wasn\u2019t there before. The prop is just a simple string. It\u2019s passed down the same way as in Vue 2, as we can see in the example:</p>\n<h4 id="parent-component">Parent Component</h4>\n<pre is:raw class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9">&lt;</span><span style="color: #7EE787">template</span><span style="color: #C9D1D9">&gt;</span></span>\n<span class="line"><span style="color: #C9D1D9">  &lt;</span><span style="color: #7EE787">basic-component</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">:message</span><span style="color: #C9D1D9">=</span><span style="color: #A5D6FF">&quot;message&quot;</span><span style="color: #C9D1D9"> /&gt;</span></span>\n<span class="line"><span style="color: #C9D1D9">&lt;/</span><span style="color: #7EE787">template</span><span style="color: #C9D1D9">&gt;</span></span></code></pre>\n<h4 id="child-component">Child Component</h4>\n<pre is:raw class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9">&lt;</span><span style="color: #7EE787">script</span><span style="color: #C9D1D9">&gt;</span></span>\n<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">import</span><span style="color: #C9D1D9"> { ref } </span><span style="color: #FF7B72">from</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">&#39;vue&#39;</span></span>\n<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">export</span><span style="color: #FFA657"> </span><span style="color: #FF7B72">default</span><span style="color: #FFA657"> {</span></span>\n<span class="line"><span style="color: #FFA657">    </span><span style="color: #C9D1D9">name: </span><span style="color: #A5D6FF">&#39;BasicComponent&#39;</span><span style="color: #FFA657">,</span></span>\n<span class="line"><span style="color: #FFA657">    </span><span style="color: #C9D1D9">props: {</span></span>\n<span class="line"><span style="color: #C9D1D9">      message: String,</span></span>\n<span class="line"><span style="color: #C9D1D9">    }</span><span style="color: #FFA657">,</span></span>\n<span class="line"><span style="color: #FFA657">    </span><span style="color: #D2A8FF">setup</span><span style="color: #FFA657">(props) </span><span style="color: #C9D1D9">{</span></span>\n<span class="line"><span style="color: #C9D1D9">      console.</span><span style="color: #D2A8FF">log</span><span style="color: #C9D1D9">(props.message)</span></span>\n<span class="line"></span>\n<span class="line"><span style="color: #C9D1D9">      </span><span style="color: #FF7B72">const</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">numEmployees</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">ref</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">10</span><span style="color: #C9D1D9">)</span></span>\n<span class="line"></span>\n<span class="line"><span style="color: #C9D1D9">      </span><span style="color: #FF7B72">return</span><span style="color: #C9D1D9"> { numEmployees }</span></span>\n<span class="line"><span style="color: #C9D1D9">    }</span><span style="color: #FFA657">,</span></span>\n<span class="line"><span style="color: #FFA657">  }</span></span>\n<span class="line"><span style="color: #C9D1D9">&lt;/</span><span style="color: #7EE787">script</span><span style="color: #C9D1D9">&gt;</span></span></code></pre>\n<p>The <code is:raw>setup</code> function must have that <code is:raw>props</code> argument if we want to have access to the prop inside the function. I can <code is:raw>console.log</code> it to see the prop value:</p>\n<p><img src="https://res.cloudinary.com/deepgram/image/upload/v1642110686/blog/2022/02/diving-into-vue-3-setup-function/console-prop-value.png" alt="Console-logged prop value"></p>\n<p>In the template, we\u2019ll have it display like this. It is the same way we would do it in Vue 2:</p>\n<pre is:raw class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9">&lt;</span><span style="color: #7EE787">template</span><span style="color: #C9D1D9">&gt;</span></span>\n<span class="line"><span style="color: #C9D1D9">  &lt;</span><span style="color: #7EE787">div</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">id</span><span style="color: #C9D1D9">=</span><span style="color: #A5D6FF">&quot;basic&quot;</span><span style="color: #C9D1D9">&gt;</span></span>\n<span class="line"><span style="color: #C9D1D9">    &lt;</span><span style="color: #7EE787">h1</span><span style="color: #C9D1D9">&gt;Basic Component&lt;/</span><span style="color: #7EE787">h1</span><span style="color: #C9D1D9">&gt;</span></span>\n<span class="line"><span style="color: #C9D1D9">    &lt;</span><span style="color: #7EE787">p</span><span style="color: #C9D1D9">&gt;Employees: {{ numEmployees }}&lt;/</span><span style="color: #7EE787">p</span><span style="color: #C9D1D9">&gt;</span></span>\n<span class="line"><span style="color: #C9D1D9">    &lt;</span><span style="color: #7EE787">div</span><span style="color: #C9D1D9">&gt;{{ message }}&lt;/</span><span style="color: #7EE787">div</span><span style="color: #C9D1D9">&gt;</span></span>\n<span class="line"><span style="color: #C9D1D9">  &lt;/</span><span style="color: #7EE787">div</span><span style="color: #C9D1D9">&gt;</span></span>\n<span class="line"><span style="color: #C9D1D9">&lt;/</span><span style="color: #7EE787">template</span><span style="color: #C9D1D9">&gt;</span></span></code></pre>\n<p><img src="https://res.cloudinary.com/deepgram/image/upload/v1642110686/blog/2022/02/diving-into-vue-3-setup-function/basic-component-with-prop.png" alt="Basic Component with prop"></p>\n<p>If we log <code is:raw>props</code> by itself to the console, like this:</p>\n<pre is:raw class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #D2A8FF">setup</span><span style="color: #C9D1D9">(props) {</span></span>\n<span class="line"><span style="color: #C9D1D9">  console.</span><span style="color: #D2A8FF">log</span><span style="color: #C9D1D9">(props);</span></span>\n<span class="line"><span style="color: #C9D1D9">},</span></span></code></pre>\n<p>Then we see the props object, which looks like this:</p>\n<p><img src="https://res.cloudinary.com/deepgram/image/upload/v1642110686/blog/2022/02/diving-into-vue-3-setup-function/console-prop-object.png" alt="Console-logged props object"></p>\n<p>The object uses a <code is:raw>Proxy</code>, which is the new way that Vue 3 does reactivity (the details of what that is go beyond the scope of this post). Because props are reactive, they cannot easily be destructured in the setup function. If you want to understand more about that, <a href="https://v3.vuejs.org/guide/composition-api-setup.html#props">the docs explain it</a>. I don\u2019t find it necessary to destructure them, however (but I\u2019m still very new to using Vue 3).</p>\n<h4 id="context">Context</h4>\n<p>The second argument, <code is:raw>context</code>, gives us access to three properties that we had available in Vue 2 using the keyword this:</p>\n<ul>\n<li>\n<p><code is:raw>attrs</code> - (formerly <code is:raw>this.$attrs</code>) - An object containing the component\u2019s attributes</p>\n</li>\n<li>\n<p><code is:raw>emit</code> - (formerly <code is:raw>this.$emit</code>) - A function that takes the event as argument</p>\n</li>\n<li>\n<p><code is:raw>slots</code> - (formerly <code is:raw>this.$slots)</code> - An object containing the component\u2019s slots</p>\n</li>\n</ul>\n<p>If we only want to use one of these in the <code is:raw>setup</code> function, we can destructure the argument like this:</p>\n<pre is:raw class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #FF7B72">export</span><span style="color: #FFA657"> </span><span style="color: #FF7B72">default</span><span style="color: #FFA657"> {</span></span>\n<span class="line"><span style="color: #FFA657">  </span><span style="color: #D2A8FF">setup</span><span style="color: #FFA657">(props, { attrs }) </span><span style="color: #C9D1D9">{</span></span>\n<span class="line"><span style="color: #C9D1D9">    console.</span><span style="color: #D2A8FF">log</span><span style="color: #C9D1D9">(attrs)</span></span>\n<span class="line"><span style="color: #C9D1D9">  }</span><span style="color: #FFA657">,</span></span>\n<span class="line"><span style="color: #FFA657">}</span></span></code></pre>\n<p>There is also another property, <code is:raw>expose</code>, which is useful in special cases. The <a href="https://v3.vuejs.org/guide/composition-api-setup.html#usage-with-templates">docs</a> go over the example of using it when returning render functions from the <code is:raw>setup</code> function. That\u2019s a bit advanced for this series. If you have used <code is:raw>expose</code>, I would be interested to hear from you because I haven\u2019t used it myself!</p>\n<h2 id="conclusion">Conclusion</h2>\n<p>And that wraps up this post about the <code is:raw>setup</code> function. In the next post, we will be looking at <code is:raw>methods</code> and <code is:raw>computed</code> to see how we use those in Vue 3. And as always, feel free to reach out on <a href="https://twitter.com/sandra_rodgers_">Twitter</a>!</p>';
}
const $$Astro = createAstro("/Users/sandrarodgers/web-next/blog/src/content/blog/posts/diving-into-vue-3-setup-function/index.md", "", "file:///Users/sandrarodgers/web-next/blog/");
const $$Index = createComponent(async ($$result, $$props, $$slots) => {
  const Astro2 = $$result.createAstro($$Astro, $$props, $$slots);
  Astro2.self = $$Index;
  new Slugger();
  return renderTemplate`<head>${renderHead($$result)}</head><p>In this series of posts, I’m diving into Vue 3 as someone who is new to the Composition API but not new to Vue in general. I’m writing my impressions of how to get started with Vue 3 and comparing it to the way I would do things in Vue 2.</p>
<p>Today, I’ll take a look at the <code>setup</code> function that is new to Vue 3.</p>
<p>And if you want to start at the beginning of the series, take a look at my first post: <a href="https://blog.deepgram.com/diving-into-vue-3-getting-started/">Diving into Vue 3: Getting Started</a>.</p>
<h2 id="the-old-way-vue-2-options-api">The Old Way: Vue 2 Options API</h2>
<p>The Options API is familiar to those of us who have used Vue 2. A single-file-component includes a <code>template</code>, <code>script</code>, and <code>style</code> section, and in the script section, we would use the <strong>options</strong> of the Options API, organized something like this:</p>
<pre class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9">&lt;</span><span style="color: #7EE787">script</span><span style="color: #C9D1D9">&gt;</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">export</span><span style="color: #FFA657"> </span><span style="color: #FF7B72">default</span><span style="color: #FFA657"> {</span></span>
<span class="line"><span style="color: #FFA657">    </span><span style="color: #C9D1D9">name: </span><span style="color: #A5D6FF">&#39;ComponentName&#39;</span><span style="color: #FFA657">,</span></span>
<span class="line"><span style="color: #FFA657">    </span><span style="color: #C9D1D9">components: {}</span><span style="color: #FFA657">,</span></span>
<span class="line"><span style="color: #FFA657">    </span><span style="color: #C9D1D9">props: {}</span><span style="color: #FFA657">,</span></span>
<span class="line"><span style="color: #FFA657">    </span><span style="color: #D2A8FF">data</span><span style="color: #FFA657">() </span><span style="color: #C9D1D9">{}</span><span style="color: #FFA657">,</span></span>
<span class="line"><span style="color: #FFA657">    </span><span style="color: #C9D1D9">watch: {}</span><span style="color: #FFA657">,</span></span>
<span class="line"><span style="color: #FFA657">    </span><span style="color: #C9D1D9">methods: {}</span><span style="color: #FFA657">,</span></span>
<span class="line"><span style="color: #FFA657">    </span><span style="color: #D2A8FF">mounted</span><span style="color: #FFA657">() </span><span style="color: #C9D1D9">{}</span><span style="color: #FFA657">,</span></span>
<span class="line"><span style="color: #FFA657">  }</span></span>
<span class="line"><span style="color: #C9D1D9">&lt;/</span><span style="color: #7EE787">script</span><span style="color: #C9D1D9">&gt;</span></span></code></pre>
<p>The Options API is all the properties and methods we get on our Vue instance, the instance we initialize when we set up the project in the <strong>main.js</strong> file (see my <a href="https://blog.deepgram.com/diving-into-vue-3-getting-started/">previous post</a> for more info on initializing the Vue application object).</p>
<p>This organization of a component seems very easy to read at first glance, and it is one of the things that made me feel unafraid to jump into Vue initially. We clearly see how the different logic is separated by its type - <code>methods</code> versus <code>computed</code> versus <code>watch</code>.</p>
<p>However, after becoming more experienced in using Vue and having worked with really large components, this actually starts to feel like a shortcoming because it forces us to jump around so much to follow the data as it moves through logic.</p>
<h2 id="new-and-improved-way-vue-3-composition-api">New and Improved Way: Vue 3 Composition API</h2>
<p>The Composition API is born from experience - the experience of struggling to keep track of logic jumping around within a Vue component, from <code>data</code> to <code>methods</code> to <code>watch</code> to <code>methods</code> again back to <code>watch</code> and so on…</p>
<p>And when we add a <strong>mixin</strong> to the mix (pun intended), jumping to a completely different file to follow the logic can be a huge headache since pieces of logic in the mixin can affect pieces of logic in the main component (rather than the mixin containing all the logic for a feature).</p>
<p>The better way is not to separate the script into sections by options, but instead to organize by <em>logical concern for individual features</em>. The <code>setup</code> function lets us do that because we can write the logic for each feature, group it under a function that we name, then invoke all the functions within the scope of the setup function.</p>
<p>This improvement has resulted in a new pattern called Vue ‘composables’, which is just this idea I described in the previous paragraph - grouping code by logical concern and making it into a reusable function. We’ll learn more about composables in a later post, but the important thing to understand now is that the <code>setup</code> function is what makes it possible.</p>
<h2 id="how-to-use-the-setup-function">How to Use the Setup Function</h2>
<p>Now we’ll get into the nitty-gritty of how to use the <code>setup</code> function.</p>
<p>Technically, the <code>setup</code> function is another <strong>option</strong> you can use in the <strong>Options API</strong> since it can be added alongside the list of other option properties and lifecycle methods, like this:</p>
<pre class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9">&lt;</span><span style="color: #7EE787">script</span><span style="color: #C9D1D9">&gt;</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">export</span><span style="color: #FFA657"> </span><span style="color: #FF7B72">default</span><span style="color: #FFA657"> {</span></span>
<span class="line"><span style="color: #FFA657">    </span><span style="color: #C9D1D9">name: </span><span style="color: #A5D6FF">&#39;ComponentName&#39;</span><span style="color: #FFA657">,</span></span>
<span class="line"><span style="color: #FFA657">    </span><span style="color: #C9D1D9">components: {}</span><span style="color: #FFA657">,</span></span>
<span class="line"><span style="color: #FFA657">    </span><span style="color: #D2A8FF">data</span><span style="color: #FFA657">() </span><span style="color: #C9D1D9">{}</span><span style="color: #FFA657">,</span></span>
<span class="line"><span style="color: #FFA657">    </span><span style="color: #C9D1D9">methods: {}</span><span style="color: #FFA657">,</span></span>
<span class="line"><span style="color: #FFA657">    </span><span style="color: #D2A8FF">mounted</span><span style="color: #FFA657">() </span><span style="color: #C9D1D9">{}</span><span style="color: #FFA657">,</span></span>
<span class="line"><span style="color: #FFA657">    </span><span style="color: #D2A8FF">setup</span><span style="color: #FFA657">() </span><span style="color: #C9D1D9">{}</span><span style="color: #FFA657">,</span></span>
<span class="line"><span style="color: #FFA657">  }</span></span>
<span class="line"><span style="color: #C9D1D9">&lt;/</span><span style="color: #7EE787">script</span><span style="color: #C9D1D9">&gt;</span></span></code></pre>
<p>However, since we are choosing to do things the Vue 3 way, we’ll probably just want to dive in completely and use the <code>setup</code> function without all the other options since what we get with <code>setup</code> will make it unnecessary to use them.</p>
<h3 id="example-using-setup">Example Using Setup</h3>
<p>Here is a very simple example that shows the most basic thing we need to do in Vue - create a variable to represent some data. This is the basic template where we have a data value for a number of employees.</p>
<pre class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9">&lt;</span><span style="color: #7EE787">template</span><span style="color: #C9D1D9">&gt;</span></span>
<span class="line"><span style="color: #C9D1D9">  &lt;</span><span style="color: #7EE787">div</span><span style="color: #C9D1D9">&gt;</span></span>
<span class="line"><span style="color: #C9D1D9">    &lt;</span><span style="color: #7EE787">h1</span><span style="color: #C9D1D9">&gt;Basic Component&lt;/</span><span style="color: #7EE787">h1</span><span style="color: #C9D1D9">&gt;</span></span>
<span class="line"><span style="color: #C9D1D9">    &lt;</span><span style="color: #7EE787">p</span><span style="color: #C9D1D9">&gt;Employees: {{ numEmployees }}&lt;/</span><span style="color: #7EE787">p</span><span style="color: #C9D1D9">&gt;</span></span>
<span class="line"><span style="color: #C9D1D9">  &lt;/</span><span style="color: #7EE787">div</span><span style="color: #C9D1D9">&gt;</span></span>
<span class="line"><span style="color: #C9D1D9">&lt;/</span><span style="color: #7EE787">template</span><span style="color: #C9D1D9">&gt;</span></span></code></pre>
<p>And here is what it would render as:</p>
<p><img src="https://res.cloudinary.com/deepgram/image/upload/v1642110686/blog/2022/02/diving-into-vue-3-setup-function/basic-component.png" alt="Basic component"></p>
<p><code>numEmployees</code> represents a number of people who work for a company. In Vue 2, in the script section, we would have created a data property using the <code>data()</code> option, like this:</p>
<h4 id="vue-2">Vue 2</h4>
<pre class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9">&lt;</span><span style="color: #7EE787">script</span><span style="color: #C9D1D9">&gt;</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">export</span><span style="color: #FFA657"> </span><span style="color: #FF7B72">default</span><span style="color: #FFA657"> {</span></span>
<span class="line"><span style="color: #FFA657">    </span><span style="color: #D2A8FF">data</span><span style="color: #FFA657">() </span><span style="color: #C9D1D9">{</span></span>
<span class="line"><span style="color: #C9D1D9">      </span><span style="color: #FF7B72">return</span><span style="color: #C9D1D9"> {</span></span>
<span class="line"><span style="color: #C9D1D9">        numEmployees: </span><span style="color: #79C0FF">0</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">      }</span></span>
<span class="line"><span style="color: #C9D1D9">    }</span><span style="color: #FFA657">,</span></span>
<span class="line"><span style="color: #FFA657">  }</span></span>
<span class="line"><span style="color: #C9D1D9">&lt;/</span><span style="color: #7EE787">script</span><span style="color: #C9D1D9">&gt;</span></span></code></pre>
<p>In Vue 3, we will just create our variable inside the <code>setup</code> function, like this:</p>
<h4 id="vue-3">Vue 3</h4>
<pre class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9">&lt;</span><span style="color: #7EE787">script</span><span style="color: #C9D1D9">&gt;</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">export</span><span style="color: #FFA657"> </span><span style="color: #FF7B72">default</span><span style="color: #FFA657"> {</span></span>
<span class="line"><span style="color: #FFA657">    </span><span style="color: #D2A8FF">setup</span><span style="color: #FFA657">() </span><span style="color: #C9D1D9">{</span></span>
<span class="line"><span style="color: #C9D1D9">      </span><span style="color: #FF7B72">const</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">numEmployees</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">10</span></span>
<span class="line"><span style="color: #C9D1D9">      </span><span style="color: #FF7B72">return</span><span style="color: #C9D1D9"> { numEmployees }</span></span>
<span class="line"><span style="color: #C9D1D9">    }</span><span style="color: #FFA657">,</span></span>
<span class="line"><span style="color: #FFA657">  }</span></span>
<span class="line"><span style="color: #C9D1D9">&lt;/</span><span style="color: #7EE787">script</span><span style="color: #C9D1D9">&gt;</span></span></code></pre>
<p>However, if we want that data property for numEmployees to be <strong>reactive</strong> (so it updates in the template when it changes in script), we have to use <code>ref()</code> around the value, and we have to import ref in order to use it:</p>
<pre class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9">&lt;</span><span style="color: #7EE787">script</span><span style="color: #C9D1D9">&gt;</span></span>
<span class="line"><span style="color: #C9D1D9">import </span><span style="color: #FF7B72">{</span><span style="color: #C9D1D9"> ref </span><span style="color: #FF7B72">}</span><span style="color: #C9D1D9"> from &quot;vue&quot;;</span></span>
<span class="line"><span style="color: #C9D1D9">export default </span><span style="color: #FF7B72">{</span></span>
<span class="line"><span style="color: #C9D1D9">  name: </span><span style="color: #A5D6FF">&quot;BasicComponent&quot;</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #D2A8FF">setup</span><span style="color: #C9D1D9">() {</span></span>
<span class="line"><span style="color: #C9D1D9">    const numEmployees </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">ref</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">10</span><span style="color: #C9D1D9">);</span></span>
<span class="line"><span style="color: #C9D1D9">    return { numEmployees };</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">}</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">};</span></span>
<span class="line"><span style="color: #C9D1D9">&lt;/</span><span style="color: #7EE787">script</span><span style="color: #C9D1D9">&gt;</span></span></code></pre>
<p>We also have to <code>return</code> an object with that data value; otherwise, it will not be available in the template.</p>
<h3 id="important-facts-about-the-setup-function">Important Facts about the Setup Function</h3>
<ol>
<li>
<p><code>setup</code> is a function, and it is also referred to as a ‘hook’ in a general sense because it is similar to the lifecycle methods in that <em>timing is important</em>. <code>Setup</code> runs before everything else - before all the lifecycle methods and the mounting of the component (although <strong>not before props are resolved,</strong> so you <strong>will have access to props</strong> in the setup function).</p>
</li>
<li>
<p>A big difference from Vue 2 is that we won’t be seeing the keyword <code>this</code> all over the place to reference data values inside a component. In Vue 3, <code>this</code> in the way it was used in the Options API is not available in the <code>setup</code> function since <code>setup</code> runs so early.</p>
</li>
<li>
<p><code>setup</code> must return an object. The object contains everything from within the scope of the setup function that you want to make available in the template.</p>
</li>
<li>
<p>Variables aren’t reactive in the <code>setup</code> function unless you use <code>ref</code> with them (or <code>reactive</code>, but for now, we only need to concern ourselves with <code>ref</code>. Stay tuned for a post on <code>ref</code> and <code>reactive</code> in the near future).</p>
</li>
<li>
<p><code>setup</code> can take two arguments - <code>props</code> and <code>context</code> - which we’ll take a look at more closely in the next section.</p>
</li>
</ol>
<h3 id="props-and-context">Props and Context</h3>
<p><code>setup</code> can take two arguments, <code>props</code> and <code>context</code>.</p>
<h4 id="props">Props</h4>
<p>In this example a prop <code>message</code> has been added that wasn’t there before. The prop is just a simple string. It’s passed down the same way as in Vue 2, as we can see in the example:</p>
<h4 id="parent-component">Parent Component</h4>
<pre class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9">&lt;</span><span style="color: #7EE787">template</span><span style="color: #C9D1D9">&gt;</span></span>
<span class="line"><span style="color: #C9D1D9">  &lt;</span><span style="color: #7EE787">basic-component</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">:message</span><span style="color: #C9D1D9">=</span><span style="color: #A5D6FF">&quot;message&quot;</span><span style="color: #C9D1D9"> /&gt;</span></span>
<span class="line"><span style="color: #C9D1D9">&lt;/</span><span style="color: #7EE787">template</span><span style="color: #C9D1D9">&gt;</span></span></code></pre>
<h4 id="child-component">Child Component</h4>
<pre class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9">&lt;</span><span style="color: #7EE787">script</span><span style="color: #C9D1D9">&gt;</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">import</span><span style="color: #C9D1D9"> { ref } </span><span style="color: #FF7B72">from</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">&#39;vue&#39;</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">export</span><span style="color: #FFA657"> </span><span style="color: #FF7B72">default</span><span style="color: #FFA657"> {</span></span>
<span class="line"><span style="color: #FFA657">    </span><span style="color: #C9D1D9">name: </span><span style="color: #A5D6FF">&#39;BasicComponent&#39;</span><span style="color: #FFA657">,</span></span>
<span class="line"><span style="color: #FFA657">    </span><span style="color: #C9D1D9">props: {</span></span>
<span class="line"><span style="color: #C9D1D9">      message: String,</span></span>
<span class="line"><span style="color: #C9D1D9">    }</span><span style="color: #FFA657">,</span></span>
<span class="line"><span style="color: #FFA657">    </span><span style="color: #D2A8FF">setup</span><span style="color: #FFA657">(props) </span><span style="color: #C9D1D9">{</span></span>
<span class="line"><span style="color: #C9D1D9">      console.</span><span style="color: #D2A8FF">log</span><span style="color: #C9D1D9">(props.message)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C9D1D9">      </span><span style="color: #FF7B72">const</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">numEmployees</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">ref</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">10</span><span style="color: #C9D1D9">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C9D1D9">      </span><span style="color: #FF7B72">return</span><span style="color: #C9D1D9"> { numEmployees }</span></span>
<span class="line"><span style="color: #C9D1D9">    }</span><span style="color: #FFA657">,</span></span>
<span class="line"><span style="color: #FFA657">  }</span></span>
<span class="line"><span style="color: #C9D1D9">&lt;/</span><span style="color: #7EE787">script</span><span style="color: #C9D1D9">&gt;</span></span></code></pre>
<p>The <code>setup</code> function must have that <code>props</code> argument if we want to have access to the prop inside the function. I can <code>console.log</code> it to see the prop value:</p>
<p><img src="https://res.cloudinary.com/deepgram/image/upload/v1642110686/blog/2022/02/diving-into-vue-3-setup-function/console-prop-value.png" alt="Console-logged prop value"></p>
<p>In the template, we’ll have it display like this. It is the same way we would do it in Vue 2:</p>
<pre class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9">&lt;</span><span style="color: #7EE787">template</span><span style="color: #C9D1D9">&gt;</span></span>
<span class="line"><span style="color: #C9D1D9">  &lt;</span><span style="color: #7EE787">div</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">id</span><span style="color: #C9D1D9">=</span><span style="color: #A5D6FF">&quot;basic&quot;</span><span style="color: #C9D1D9">&gt;</span></span>
<span class="line"><span style="color: #C9D1D9">    &lt;</span><span style="color: #7EE787">h1</span><span style="color: #C9D1D9">&gt;Basic Component&lt;/</span><span style="color: #7EE787">h1</span><span style="color: #C9D1D9">&gt;</span></span>
<span class="line"><span style="color: #C9D1D9">    &lt;</span><span style="color: #7EE787">p</span><span style="color: #C9D1D9">&gt;Employees: {{ numEmployees }}&lt;/</span><span style="color: #7EE787">p</span><span style="color: #C9D1D9">&gt;</span></span>
<span class="line"><span style="color: #C9D1D9">    &lt;</span><span style="color: #7EE787">div</span><span style="color: #C9D1D9">&gt;{{ message }}&lt;/</span><span style="color: #7EE787">div</span><span style="color: #C9D1D9">&gt;</span></span>
<span class="line"><span style="color: #C9D1D9">  &lt;/</span><span style="color: #7EE787">div</span><span style="color: #C9D1D9">&gt;</span></span>
<span class="line"><span style="color: #C9D1D9">&lt;/</span><span style="color: #7EE787">template</span><span style="color: #C9D1D9">&gt;</span></span></code></pre>
<p><img src="https://res.cloudinary.com/deepgram/image/upload/v1642110686/blog/2022/02/diving-into-vue-3-setup-function/basic-component-with-prop.png" alt="Basic Component with prop"></p>
<p>If we log <code>props</code> by itself to the console, like this:</p>
<pre class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #D2A8FF">setup</span><span style="color: #C9D1D9">(props) {</span></span>
<span class="line"><span style="color: #C9D1D9">  console.</span><span style="color: #D2A8FF">log</span><span style="color: #C9D1D9">(props);</span></span>
<span class="line"><span style="color: #C9D1D9">},</span></span></code></pre>
<p>Then we see the props object, which looks like this:</p>
<p><img src="https://res.cloudinary.com/deepgram/image/upload/v1642110686/blog/2022/02/diving-into-vue-3-setup-function/console-prop-object.png" alt="Console-logged props object"></p>
<p>The object uses a <code>Proxy</code>, which is the new way that Vue 3 does reactivity (the details of what that is go beyond the scope of this post). Because props are reactive, they cannot easily be destructured in the setup function. If you want to understand more about that, <a href="https://v3.vuejs.org/guide/composition-api-setup.html#props">the docs explain it</a>. I don’t find it necessary to destructure them, however (but I’m still very new to using Vue 3).</p>
<h4 id="context">Context</h4>
<p>The second argument, <code>context</code>, gives us access to three properties that we had available in Vue 2 using the keyword this:</p>
<ul>
<li>
<p><code>attrs</code> - (formerly <code>this.$attrs</code>) - An object containing the component’s attributes</p>
</li>
<li>
<p><code>emit</code> - (formerly <code>this.$emit</code>) - A function that takes the event as argument</p>
</li>
<li>
<p><code>slots</code> - (formerly <code>this.$slots)</code> - An object containing the component’s slots</p>
</li>
</ul>
<p>If we only want to use one of these in the <code>setup</code> function, we can destructure the argument like this:</p>
<pre class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #FF7B72">export</span><span style="color: #FFA657"> </span><span style="color: #FF7B72">default</span><span style="color: #FFA657"> {</span></span>
<span class="line"><span style="color: #FFA657">  </span><span style="color: #D2A8FF">setup</span><span style="color: #FFA657">(props, { attrs }) </span><span style="color: #C9D1D9">{</span></span>
<span class="line"><span style="color: #C9D1D9">    console.</span><span style="color: #D2A8FF">log</span><span style="color: #C9D1D9">(attrs)</span></span>
<span class="line"><span style="color: #C9D1D9">  }</span><span style="color: #FFA657">,</span></span>
<span class="line"><span style="color: #FFA657">}</span></span></code></pre>
<p>There is also another property, <code>expose</code>, which is useful in special cases. The <a href="https://v3.vuejs.org/guide/composition-api-setup.html#usage-with-templates">docs</a> go over the example of using it when returning render functions from the <code>setup</code> function. That’s a bit advanced for this series. If you have used <code>expose</code>, I would be interested to hear from you because I haven’t used it myself!</p>
<h2 id="conclusion">Conclusion</h2>
<p>And that wraps up this post about the <code>setup</code> function. In the next post, we will be looking at <code>methods</code> and <code>computed</code> to see how we use those in Vue 3. And as always, feel free to reach out on <a href="https://twitter.com/sandra_rodgers_">Twitter</a>!</p>`;
}, "/Users/sandrarodgers/web-next/blog/src/content/blog/posts/diving-into-vue-3-setup-function/index.md");

export { compiledContent, $$Index as default, frontmatter, metadata, rawContent };
