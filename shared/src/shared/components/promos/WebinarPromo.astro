---
import AbstractPromo from "./AbstractPromo.astro";
import NewsletterPromo from "./NewsletterPromo.astro";
import PromoForm from "./PromoForm.astro";
import PromoDate from "./PromoDate.astro";

const { date, humanReadableDate, backgroundImage, theme, formText, buttonText, ...rest } = Astro.props;

const dateFormatted = new Date(date);
function isBeforeToday(dateFormatted) {
	const today = new Date();
	today.setHours(0, 0, 0, 0);
	return dateFormatted < today;
}
const dateIsBeforeToday = isBeforeToday(dateFormatted);
const dateNotPast = dateIsBeforeToday === false;
const datePast = dateIsBeforeToday === true;
---

{dateNotPast && (
	<AbstractPromo strapline="Webinar" title="this is the title" backgroundImage={backgroundImage} theme={theme} {...rest}>
		<PromoDate humanReadableDate={humanReadableDate} />
		<PromoForm theme={theme} formText={formText} buttonText={buttonText} humanReadableDate={humanReadableDate} />
	</AbstractPromo>
)}

{datePast && <NewsletterPromo />}
